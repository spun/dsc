function setHtml5Player(t){"use strict";var e,n=document.getElementById("dsc_audio");null===n?(e=document.createElement("audio"),e.id="dsc_audio",e.controls="controls",e.autoplay="autoplay",e.src=t,e.style.margin="25px 15px",document.getElementById("player").insertBefore(e,document.getElementById("player").childNodes[0]),document.getElementById("song_player").parentNode.removeChild(document.getElementById("song_player"))):n.src=t}function getId(){"use strict";var t,e,n,o,a;for(e=location.href,n=e.split("/"),o=n.length,a=0;o>a;a+=1)"listen"===n[a]&&(t=n[a+1]);return t}function getAudioData(t,e){"use strict";var n,o="http://query.yahooapis.com/v1/public/yql?q="+encodeURIComponent("select * from xml where url='http://www.goear.com/playersong/"+t+"' and itemPath='playlists.playlist.track'")+"&format=json";n=XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),n.onreadystatechange=function(){if(4===n.readyState&&200===n.status){var t=JSON.parse(n.responseText).query.results.track;e(t)}},n.open("GET",o,!0),n.send()}function createButtonUI(t){"use strict";var e,n,o;if(e=document.createElement("li"),n=document.createElement("a"),n.textContent="Descargar",n.setAttribute("href",t.href),n.setAttribute("title","Haz click con el segundo boton y elige guardar como..."),n.setAttribute("class","dragout"),n.setAttribute("download",t.title),n.setAttribute("draggable","true"),n.setAttribute("data-downloadurl","audio/mpeg:"+t.title+".mp3:"+t.href),n.ondblclick=function(t){setHtml5Player(n.href),t.preventDefault(),t.stopPropagation()},e.appendChild(n),o=document.getElementsByClassName("actions")[0],!o&&null!==document.getElementById("maincontent")){var a=document.getElementById("maincontent"),r=a.contentDocument||a.contentWindow.document;o=r.getElementsByClassName("actions")[0]}o.insertBefore(e,o.firstChild),n.addEventListener("dragstart",function(t){t.dataTransfer.setData("DownloadURL",n.dataset.downloadurl)},!1)}!function(){"use strict";var t=getId();getAudioData(t,function(t){createButtonUI(t)})}();