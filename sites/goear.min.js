function setHtml5Player(e){"use strict";var t,n=document.getElementById("dsc_audio");if(n===null){t=document.createElement("audio");t.id="dsc_audio";t.controls="controls";t.autoplay="autoplay";t.src=e;t.style.margin="25px 15px";document.getElementById("player").insertBefore(t,document.getElementById("player").childNodes[0]);document.getElementById("song_player").parentNode.removeChild(document.getElementById("song_player"))}else{n.src=e}}function getId(){"use strict";var e,t,n,r,i;t=location.href;n=t.split("/");r=n.length;for(i=0;i<r;i=i+1){if(n[i]==="listen"){e=n[i+1]}}return e}function getAudioData(e,t){"use strict";var n,r="http://query.yahooapis.com/v1/public/yql?q="+encodeURIComponent("select * from xml where url='http://www.goear.com/playersong/"+e+"' and itemPath='playlists.playlist.track'")+"&format=json";if(window.XMLHttpRequest){n=new XMLHttpRequest}else{n=new ActiveXObject("Microsoft.XMLHTTP")}n.onreadystatechange=function(){if(n.readyState===4&&n.status===200){var e=JSON.parse(n.responseText).query.results.track;t(e)}};n.open("GET",r,true);n.send()}function createButtonUI(e){"use strict";var t,n,r;t=document.createElement("li");n=document.createElement("a");n.textContent="Descargar";n.setAttribute("href",e.href);n.setAttribute("title","Haz click con el segundo boton y elige guardar como...");n.style.backgroundPosition="10px -342px";n.setAttribute("class","btn dragout");n.setAttribute("download",e.title);n.setAttribute("draggable","true");n.setAttribute("data-downloadurl","audio/mpeg:"+e.title+".mp3:"+e.href);n.ondblclick=function(e){setHtml5Player(this.href);e.preventDefault()};t.appendChild(n);r=document.getElementsByClassName("actions")[0];r.insertBefore(t,r.firstChild);n.addEventListener("dragstart",function(e){e.dataTransfer.setData("DownloadURL",n.dataset.downloadurl)},false)}(function(){"use strict";var e=getId();getAudioData(e,function(e){createButtonUI(e)})})()