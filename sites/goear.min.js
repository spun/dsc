function setHtml5Player(a){"use strict";var b,c=document.getElementById("dsc_audio");null===c?(b=document.createElement("audio"),b.id="dsc_audio",b.controls="controls",b.autoplay="autoplay",b.src=a,b.style.margin="25px 15px",document.getElementById("player").insertBefore(b,document.getElementById("player").childNodes[0]),document.getElementById("song_player").parentNode.removeChild(document.getElementById("song_player"))):c.src=a}function getId(){"use strict";var a,b,c,d,e;for(b=location.href,c=b.split("/"),d=c.length,e=0;d>e;e+=1)"listen"===c[e]&&(a=c[e+1]);return a}function getAudioData(a,b){"use strict";var c,d="http://query.yahooapis.com/v1/public/yql?q="+encodeURIComponent("select * from xml where url='http://www.goear.com/playersong/"+a+"' and itemPath='playlists.playlist.track'")+"&format=json";c=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),c.onreadystatechange=function(){if(4===c.readyState&&200===c.status){var a=JSON.parse(c.responseText).query.results.track;b(a)}},c.open("GET",d,!0),c.send()}function createButtonUI(a){"use strict";var b,c,d;b=document.createElement("li"),c=document.createElement("a"),c.textContent="Descargar",c.setAttribute("href",a.href),c.setAttribute("title","Haz click con el segundo boton y elige guardar como..."),c.style.backgroundPosition="10px -342px",c.setAttribute("class","radius_3 dragout"),c.setAttribute("draggable","true"),c.setAttribute("data-downloadurl","audio/mpeg:"+a.title+".mp3:"+a.href),c.onclick=function(a){a.preventDefault()},c.ondblclick=function(a){setHtml5Player(this.href),a.preventDefault()},b.appendChild(c),d=document.getElementById("actions"),d.insertBefore(b,d.firstChild),c.addEventListener("dragstart",function(a){a.dataTransfer.setData("DownloadURL",c.dataset.downloadurl)},!1)}!function(){"use strict";var a=getId();getAudioData(a,function(a){createButtonUI(a)})}();