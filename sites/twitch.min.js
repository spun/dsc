function getVideoId(){"use strict";var e,t,n=location.href;e=/^.*(twitch\.tv\/[\w]+\/[b|c]\/)([0-9]+)*/;t=n.match(e);if(t){return t[2]}return false}function createButtonUI(){"use strict";var e,t,n,r;e=document.getElementById("dsc-button");if(e!==null){e.parentNode.removeChild(e)}t=document.createElement("a");t.id="dsc-button";t.href="#";t.setAttribute("class","dropdown_static action");n=document.createElement("span");n.textContent="Descarga ";t.appendChild(n);document.getElementById("channel_actions").appendChild(t);t.onclick=function(){r=document.getElementById("dsc-list-menu");if(r.style.display==="none"){r.style.display="block"}else{r.style.display="none"}r.style.top=t.offsetTop-(r.offsetHeight+5)+"px";r.style.left=t.offsetLeft+"px"}}function createDropDownMenuUI(){"use strict";var e,t=document.getElementById("dsc-list-menu");if(t!==null){t.parentNode.removeChild(t)}e=document.createElement("div");e.setAttribute("class","dropmenu menu-like");e.id="dsc-list-menu";e.style.position="absolute";e.style.top="752px";e.style.left="484px";e.style.outline="none";e.style.display="none";document.getElementsByClassName("tse-content")[1].appendChild(e)}function addSectionToList(e){"use strict";var t;t=document.createElement("label");t.style.textAlign="center";t.textContent=e;document.getElementById("dsc-list-menu").appendChild(t)}function addItemToList(e,t){"use strict";var n,r;n=document.createElement("span");n.setAttribute("class","hide-owner");r=document.createElement("a");r.setAttribute("class","dropmenu_action");r.href=t;r.textContent="Part "+e;r.download="Part "+e;n.appendChild(r);document.getElementById("dsc-list-menu").appendChild(n)}function getVideoUrls(e,t){"use strict";var n,r,i="http://query.yahooapis.com/v1/public/yql?q="+encodeURIComponent('select * from json where url="https://api.twitch.tv/api/videos/a'+e+'.xml"')+"&format=json";if(window.XMLHttpRequest){r=new XMLHttpRequest}else{r=new ActiveXObject("Microsoft.XMLHTTP")}r.onreadystatechange=function(){if(r.readyState===4&&r.status===200){n=JSON.parse(r.responseText).query.results.json.chunks;t(n)}};r.open("GET",i,true);r.send()}(function(){"use strict";var e,t,n,r=getVideoId();if(r){createDropDownMenuUI();getVideoUrls(r,function(r){var s;for(s in r){if(r.hasOwnProperty(s)){addSectionToList(s);t=r[s];if(t[0]){n=t.length;for(e=0;e<n;e=e+1){addItemToList(e+1,t[e].url)}}else{addItemToList(1,t.url)}}}createButtonUI()})}})()