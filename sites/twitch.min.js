function getVideoId(){"use strict";var t,e,n=location.href;return t=/^.*(twitch\.tv\/[\w]+\/[b\|c\|v]\/)([0-9]+)*/,e=n.match(t),e?e[2]:!1}function createButtonUI(t){"use strict";var e,n,o,s;e=document.getElementById("dsc-button"),null!==e&&e.parentNode.removeChild(e),n=document.createElement("span"),n.id="dsc-button",n.setAttribute("class","ember-view"),o=document.createElement("a"),o.setAttribute("class","button glyph-only"),o.textContent="Descarga ",o.href=t,n.appendChild(o),document.getElementsByClassName("channel-actions")[0].appendChild(n),n.onclick=function(){s=document.getElementById("dsc-list-menu"),s&&("none"===s.style.display?s.style.display="block":s.style.display="none",s.style.top=o.offsetTop-(s.offsetHeight+5)+"px",s.style.left=o.offsetLeft+"px")}}function getVideoUrl(t,e){"use strict";var n,o="https://query.yahooapis.com/v1/public/yql?q="+encodeURIComponent('select * from json where url="https://api.twitch.tv/api/vods/'+t+'/access_token"')+"&format=json";n=XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),n.onreadystatechange=function(){if(4===n.readyState&&200===n.status){var o=JSON.parse(n.responseText).query.results.json,s=o.sig,c=encodeURIComponent(o.token),a="http://usher.twitch.tv/vod/"+t+"?nauthsig="+s+"&nauth="+c;e(a)}},n.open("GET",o,!0),n.send()}!function(){"use strict";var t=getVideoId();t&&getVideoUrl(t,function(t){createButtonUI(t)})}();