function getVideoId(){"use strict";var a,b,c=location.href;return a=/^.*(twitch\.tv\/[\w]+\/[b|c]\/)([0-9]+)*/,b=c.match(a),b?b[2]:!1}function createButtonUI(){"use strict";var a,b,c,d;a=document.getElementById("dsc-button"),null!==a&&a.parentNode.removeChild(a),b=document.createElement("a"),b.id="dsc-button",b.href="#",b.setAttribute("class","dropdown_static action"),c=document.createElement("span"),c.textContent="Descarga ",b.appendChild(c),document.getElementById("channel_actions").appendChild(b),b.onclick=function(){d=document.getElementById("dsc-list-menu"),d.style.display="none"===d.style.display?"block":"none",d.style.top=b.offsetTop-(d.offsetHeight+5)+"px",d.style.left=b.offsetLeft+"px"}}function createDropDownMenuUI(){"use strict";var a,b=document.getElementById("dsc-list-menu");null!==b&&b.parentNode.removeChild(b),a=document.createElement("div"),a.setAttribute("class","dropmenu menu-like"),a.id="dsc-list-menu",a.style.position="absolute",a.style.top="752px",a.style.left="484px",a.style.outline="none",a.style.display="none",document.getElementsByClassName("tse-content")[1].appendChild(a)}function addItemToList(a,b){"use strict";var c,d;c=document.createElement("span"),c.setAttribute("class","hide-owner"),d=document.createElement("a"),d.setAttribute("class","dropmenu_action"),d.href=b,d.textContent="Parte "+a,c.appendChild(d),document.getElementById("dsc-list-menu").appendChild(c)}function getVideoUrls(a,b){"use strict";var c,d,e,f,g=[],h="http://query.yahooapis.com/v1/public/yql?q="+encodeURIComponent('select * from xml where url="http://api.justin.tv/api/broadcast/by_archive/'+a+'.xml"')+"&format=json";f=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),f.onreadystatechange=function(){if(4===f.readyState&&200===f.status){if(e=JSON.parse(f.responseText).query.results.archives.archive,e[0])for(d=e.length,c=0;d>c;c+=1)g.push(e[c].video_file_url);else g.push(e.video_file_url);b(g)}},f.open("GET",h,!0),f.send()}!function(){"use strict";var a,b,c=getVideoId();c&&(createDropDownMenuUI(),getVideoUrls(c,function(c){for(b=c.length,a=0;b>a;a+=1)addItemToList(parseInt(a,10)+1,c[a]);createButtonUI()}))}();