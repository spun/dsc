import{_ as e,a as t,b as o}from"./_tslib-6fadb982.js";var n={5:{ext:"flv",width:400,height:240,acodec:"mp3",abr:64,vcodec:"h263"},6:{ext:"flv",width:450,height:270,acodec:"mp3",abr:64,vcodec:"h263"},13:{ext:"3gp",acodec:"aac",vcodec:"mp4v"},17:{ext:"3gp",width:176,height:144,acodec:"aac",abr:24,vcodec:"mp4v"},18:{ext:"mp4",width:640,height:360,acodec:"aac",abr:96,vcodec:"h264"},22:{ext:"mp4",width:1280,height:720,acodec:"aac",abr:192,vcodec:"h264"},34:{ext:"flv",width:640,height:360,acodec:"aac",abr:128,vcodec:"h264"},35:{ext:"flv",width:854,height:480,acodec:"aac",abr:128,vcodec:"h264"},36:{ext:"3gp",width:320,acodec:"aac",vcodec:"mp4v"},37:{ext:"mp4",width:1920,height:1080,acodec:"aac",abr:192,vcodec:"h264"},38:{ext:"mp4",width:4096,height:3072,acodec:"aac",abr:192,vcodec:"h264"},43:{ext:"webm",width:640,height:360,acodec:"vorbis",abr:128,vcodec:"vp8"},44:{ext:"webm",width:854,height:480,acodec:"vorbis",abr:128,vcodec:"vp8"},45:{ext:"webm",width:1280,height:720,acodec:"vorbis",abr:192,vcodec:"vp8"},46:{ext:"webm",width:1920,height:1080,acodec:"vorbis",abr:192,vcodec:"vp8"},59:{ext:"mp4",width:854,height:480,acodec:"aac",abr:128,vcodec:"h264"},78:{ext:"mp4",width:854,height:480,acodec:"aac",abr:128,vcodec:"h264"},82:{ext:"mp4",height:360,format_note:"3D",acodec:"aac",abr:128,vcodec:"h264",preference:-20},83:{ext:"mp4",height:480,format_note:"3D",acodec:"aac",abr:128,vcodec:"h264",preference:-20},84:{ext:"mp4",height:720,format_note:"3D",acodec:"aac",abr:192,vcodec:"h264",preference:-20},85:{ext:"mp4",height:1080,format_note:"3D",acodec:"aac",abr:192,vcodec:"h264",preference:-20},100:{ext:"webm",height:360,format_note:"3D",acodec:"vorbis",abr:128,vcodec:"vp8",preference:-20},101:{ext:"webm",height:480,format_note:"3D",acodec:"vorbis",abr:192,vcodec:"vp8",preference:-20},102:{ext:"webm",height:720,format_note:"3D",acodec:"vorbis",abr:192,vcodec:"vp8",preference:-20},91:{ext:"mp4",height:144,format_note:"HLS",acodec:"aac",abr:48,vcodec:"h264",preference:-10},92:{ext:"mp4",height:240,format_note:"HLS",acodec:"aac",abr:48,vcodec:"h264",preference:-10},93:{ext:"mp4",height:360,format_note:"HLS",acodec:"aac",abr:128,vcodec:"h264",preference:-10},94:{ext:"mp4",height:480,format_note:"HLS",acodec:"aac",abr:128,vcodec:"h264",preference:-10},95:{ext:"mp4",height:720,format_note:"HLS",acodec:"aac",abr:256,vcodec:"h264",preference:-10},96:{ext:"mp4",height:1080,format_note:"HLS",acodec:"aac",abr:256,vcodec:"h264",preference:-10},132:{ext:"mp4",height:240,format_note:"HLS",acodec:"aac",abr:48,vcodec:"h264",preference:-10},151:{ext:"mp4",height:72,format_note:"HLS",acodec:"aac",abr:24,vcodec:"h264",preference:-10},133:{ext:"mp4",height:240,format_note:"DASH video",vcodec:"h264"},134:{ext:"mp4",height:360,format_note:"DASH video",vcodec:"h264"},135:{ext:"mp4",height:480,format_note:"DASH video",vcodec:"h264"},136:{ext:"mp4",height:720,format_note:"DASH video",vcodec:"h264"},137:{ext:"mp4",height:1080,format_note:"DASH video",vcodec:"h264"},138:{ext:"mp4",format_note:"DASH video",vcodec:"h264"},160:{ext:"mp4",height:144,format_note:"DASH video",vcodec:"h264"},212:{ext:"mp4",height:480,format_note:"DASH video",vcodec:"h264"},264:{ext:"mp4",height:1440,format_note:"DASH video",vcodec:"h264"},298:{ext:"mp4",height:720,format_note:"DASH video",vcodec:"h264",fps:60},299:{ext:"mp4",height:1080,format_note:"DASH video",vcodec:"h264",fps:60},266:{ext:"mp4",height:2160,format_note:"DASH video",vcodec:"h264"},139:{ext:"m4a",format_note:"DASH audio",acodec:"aac",abr:48,container:"m4a_dash"},140:{ext:"m4a",format_note:"DASH audio",acodec:"aac",abr:128,container:"m4a_dash"},141:{ext:"m4a",format_note:"DASH audio",acodec:"aac",abr:256,container:"m4a_dash"},256:{ext:"m4a",format_note:"DASH audio",acodec:"aac",container:"m4a_dash"},258:{ext:"m4a",format_note:"DASH audio",acodec:"aac",container:"m4a_dash"},325:{ext:"m4a",format_note:"DASH audio",acodec:"dtse",container:"m4a_dash"},328:{ext:"m4a",format_note:"DASH audio",acodec:"ec-3",container:"m4a_dash"},167:{ext:"webm",height:360,width:640,format_note:"DASH video",container:"webm",vcodec:"vp8"},168:{ext:"webm",height:480,width:854,format_note:"DASH video",container:"webm",vcodec:"vp8"},169:{ext:"webm",height:720,width:1280,format_note:"DASH video",container:"webm",vcodec:"vp8"},170:{ext:"webm",height:1080,width:1920,format_note:"DASH video",container:"webm",vcodec:"vp8"},218:{ext:"webm",height:480,width:854,format_note:"DASH video",container:"webm",vcodec:"vp8"},219:{ext:"webm",height:480,width:854,format_note:"DASH video",container:"webm",vcodec:"vp8"},278:{ext:"webm",height:144,format_note:"DASH video",container:"webm",vcodec:"vp9"},242:{ext:"webm",height:240,format_note:"DASH video",vcodec:"vp9"},243:{ext:"webm",height:360,format_note:"DASH video",vcodec:"vp9"},244:{ext:"webm",height:480,format_note:"DASH video",vcodec:"vp9"},245:{ext:"webm",height:480,format_note:"DASH video",vcodec:"vp9"},246:{ext:"webm",height:480,format_note:"DASH video",vcodec:"vp9"},247:{ext:"webm",height:720,format_note:"DASH video",vcodec:"vp9"},248:{ext:"webm",height:1080,format_note:"DASH video",vcodec:"vp9"},271:{ext:"webm",height:1440,format_note:"DASH video",vcodec:"vp9"},272:{ext:"webm",height:2160,format_note:"DASH video",vcodec:"vp9"},302:{ext:"webm",height:720,format_note:"DASH video",vcodec:"vp9",fps:60},303:{ext:"webm",height:1080,format_note:"DASH video",vcodec:"vp9",fps:60},308:{ext:"webm",height:1440,format_note:"DASH video",vcodec:"vp9",fps:60},313:{ext:"webm",height:2160,format_note:"DASH video",vcodec:"vp9"},315:{ext:"webm",height:2160,format_note:"DASH video",vcodec:"vp9",fps:60},171:{ext:"webm",acodec:"vorbis",format_note:"DASH audio",abr:128},172:{ext:"webm",acodec:"vorbis",format_note:"DASH audio",abr:256},249:{ext:"webm",format_note:"DASH audio",acodec:"opus",abr:50},250:{ext:"webm",format_note:"DASH audio",acodec:"opus",abr:70},251:{ext:"webm",format_note:"DASH audio",acodec:"opus",abr:160},394:{acodec:"none",vcodec:"av01.0.05M.08"},395:{acodec:"none",vcodec:"av01.0.05M.08"},396:{acodec:"none",vcodec:"av01.0.05M.08"},397:{acodec:"none",vcodec:"av01.0.05M.08"}};function a(e){var t,o,n,a;return function(e){return e.hours.toString().padStart(2,"0")+":"+e.minutes.toString().padStart(2,"0")+":"+e.seconds.toString().padStart(2,"0")+","+e.milliseconds.toString().padStart(3,"0")}((o=(t=e>=0?e:0)%1e3,n=Math.floor(t/1e3)%60,a=Math.floor(t/6e4)%60,{hours:Math.floor(t/36e5),minutes:a,seconds:n,milliseconds:o}))}!function(e,t){void 0===t&&(t={});var o=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===o&&n.firstChild?n.insertBefore(a,n.firstChild):n.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}("#dsc_popup.card {\n  font-family: sans-serif;\n  font-size: 12px;\n  position: fixed;\n  background: #fff;\n  width: 360px;\n  right: 16px;\n  bottom: 16px;\n  z-index: 1000;\n  border-radius: 2px;\n  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.19), 0 6px 6px rgba(0, 0, 0, 0.23);\n  animation: animateElement linear 0.3s;\n  transition: opacity 0.3s ease-out;\n}\n#dsc_popup.card * {\n  font-size: 100%;\n  margin: 0;\n  padding: 0;\n  line-height: 1;\n}\n\n#dsc_popup.card .header {\n  font-weight: bold;\n  position: relative;\n  background: #ff0000;\n  border-radius: 2px 2px 0 0;\n  box-shadow: 0 3px 6px -2px #808080;\n  overflow: hidden;\n  display: flex;\n}\n\n#dsc_popup.card .header .title {\n  color: #fff;\n  padding: 16px;\n  flex-grow: 1;\n}\n\n#dsc_popup.card .header .close-popup-button,\n#dsc_popup.card .header .minimize-popup-button {\n  padding: 16px;\n  color: #fff;\n  text-align: center;\n  cursor: pointer;\n}\n\n#dsc_popup.card .header .close-popup-button:hover,\n#dsc_popup.card .header .minimize-popup-button:hover {\n  background: #ca0000;\n}\n\n#dsc_popup.card .list {\n  list-style-type: none;\n  max-height: 240px;\n  overflow-y: scroll;\n  transition: max-height 0.3s ease-out;\n}\n\n#dsc_popup.card .list .list-item a {\n  padding: 16px;\n  text-decoration: none;\n  display: block;\n}\n\n#dsc_popup.card .list .list-item a .title {\n  color: #000;\n}\n\n#dsc_popup.card .list .list-item a .subtitle {\n  color: #0000008a;\n  margin-top: 4px;\n}\n\n#dsc_popup.card .list .list-item a {\n  text-decoration: none;\n  padding: 16px;\n  display: block;\n}\n\n#dsc_popup.card .list .list-item:hover {\n  background: rgb(245, 245, 245);\n}\n\n#dsc_popup.card .list .list-item:active {\n  background: #bebebe;\n}\n\n@keyframes animateElement {\n  0% {\n    opacity: 0;\n    transform: translate(0px, 10px);\n  }\n  100% {\n    opacity: 1;\n    transform: translate(0px, 0px);\n  }\n}\n\n/* Minimize */\n#dsc_popup.card.minimize .header .title {\n  cursor: pointer;\n}\n\n#dsc_popup.card.minimize .list {\n  max-height: 0;\n  transition: max-height 0.3s ease-out;\n}\n\n#dsc_popup.card.minimize {\n  opacity: 0.5;\n  transition: opacity 0.3s ease-out;\n}\n\n#dsc_popup.card.minimize:hover {\n  opacity: 1;\n}\n");var c,i=function(){function e(e){var t,o;this.boxId="dsc_popup",this.boxElement=((t=document.createElement("div")).classList.add("card"),t),this.boxElement.id=this.boxId,this.headerElement=function(e){var t=document.createElement("p");t.classList.add("header");var o=document.createElement("span");o.textContent="Available formats",o.classList.add("title"),o.onclick=function(){return e.restore()},t.appendChild(o);var n=document.createElement("span");n.classList.add("minimize-popup-button"),n.textContent="_",n.onclick=function(){return e.toggle()},t.appendChild(n);var a=document.createElement("span");return a.classList.add("close-popup-button"),a.textContent="X",a.onclick=function(){return e.hide()},t.appendChild(a),t}(this),this.boxElement.appendChild(this.headerElement),this.listElement=((o=document.createElement("ul")).classList.add("list"),o),this.boxElement.appendChild(this.listElement),this.clickListener=e}return e.prototype.addItemToList=function(e){var t=this,o=function(e,t,o){var n=document.createElement("li");n.classList.add("list-item");var a=document.createElement("a");a.href=o,n.appendChild(a);var c=document.createElement("p");c.classList.add("title"),c.textContent=e,a.appendChild(c);var i=document.createElement("p");return i.classList.add("subtitle"),i.textContent=t,a.appendChild(i),n}(e.title,e.subtitle,e.url);o.onclick=function(){return t.clickListener(e),!1},this.listElement.appendChild(o)},e.prototype.show=function(){this.hide(),document.body.appendChild(this.boxElement)},e.prototype.hide=function(){var e=document.getElementById(this.boxId);if(null!=e){var t=e.parentElement;t&&t.removeChild(e)}},e.prototype.minimize=function(){this.boxElement.classList.add("minimize")},e.prototype.restore=function(){this.boxElement.classList.remove("minimize")},e.prototype.toggle=function(){this.boxElement.classList.contains("minimize")?this.restore():this.minimize()},e}();function r(e){var t=e.match(/^.*(youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/);return t?t[2]:""}function d(e){var t=e.streamingData,o=t.formats,a=t.adaptiveFormats,c=o.concat(a).filter((function(e){return e})),i=escape(e.videoDetails.title.replace(/"/g,""))||"download",r=[];return c.forEach((function(e){var t=function(e){var t="Unknown",o="",a=n[e];if(a){t=function(e){return e.width&&e.height?e.width+" x "+e.height:e.width||e.height?""+(e.width||e.height):""}(a)+" ("+a.ext+")",a.format_note&&(t+=" - "+a.format_note);var c=[];a.vcodec&&c.push("video: "+a.vcodec),a.acodec&&c.push("audio: "+a.acodec),o=c.length>0?c.join(" + "):"itag: "+e}return{text:t,subtext:o}}(e.itag);r.push({title:t.text,subtitle:t.subtext||e.size||e.quality||"",url:e.url+"&title="+i})})),r}function s(o){return e(this,void 0,void 0,(function(){var e,n,a,c,i,r;return t(this,(function(t){switch(t.label){case 0:return e=ytcfg.data_,n=e.INNERTUBE_API_KEY,a=e.INNERTUBE_CONTEXT_CLIENT_VERSION,c=e.INNERTUBE_CONTEXT_HL,i=e.INNERTUBE_CONTEXT_CLIENT_NAME,r={context:{client:{hl:c,clientName:i,clientVersion:a,mainAppWebInfo:{graftUrl:"/watch?v="+o}}},videoId:o},[4,fetch("https://youtubei.googleapis.com/youtubei/v1/player?key="+n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})];case 1:return[2,t.sent().json()]}}))}))}function h(){var o,n,a,c;return e(this,void 0,void 0,(function(){var e,i,h,p,m;return t(this,(function(t){switch(t.label){case 0:if(e=window.location.href,""===(i=r(e)))return[3,4];if(h=!1,(p=null===(n=null===(o=null===ytplayer||void 0===ytplayer?void 0:ytplayer.config)||void 0===o?void 0:o.args)||void 0===n?void 0:n.video_id)&&i===p&&(h=!0),!0===h&&(null===(c=null===(a=null===ytplayer||void 0===ytplayer?void 0:ytplayer.config)||void 0===a?void 0:a.args)||void 0===c?void 0:c.raw_player_response))return console.info('Using method 1, "getFormatsUsingYtPlayerPlayerResponse"'),[2,d(ytplayer.config.args.raw_player_response)];console.info('Using method 2, "getPlayerResponseFromApi"'),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,s(i)];case 2:return[2,d(t.sent())];case 3:throw m=t.sent(),new Error("getPlayerResponseFromApi failed: "+m);case 4:throw new Error}}))}))}function p(o){return e(this,void 0,void 0,(function(){var e,n,c,i,r,d;return t(this,(function(t){switch(t.label){case 0:return o.extras?(e=o.extras.baseUrl,[4,fetch(e+"&fmt=json3")]):[2];case 1:return[4,t.sent().json()];case 2:return n=t.sent(),c="",i=1,n.events.forEach((function(e){e.tStartMs&&e.dDurationMs&&e.segs&&(c+=i+"\r\n",c+=a(e.tStartMs)+" --\x3e "+a(e.tStartMs+e.dDurationMs)+"\r\n",e.segs.forEach((function(e){c+=e.utf8+"\r\n"})),c+="\r\n",i+=1)})),"subtitle.srt",r=new Blob([c],{type:"text/plain"}),(d=window.document.createElement("a")).href=window.URL.createObjectURL(r),d.download="subtitle.srt",document.body.appendChild(d),d.click(),document.body.removeChild(d),[2]}}))}))}function m(){return e(this,void 0,void 0,(function(){var n,a,d,s=this;return t(this,(function(m){switch(m.label){case 0:n=new i((function(o){return e(s,void 0,void 0,(function(){var e;return t(this,(function(t){switch(t.label){case 0:switch((e=o).type){case c.VIDEO:return[3,1];case c.SUBTITLE:return[3,2]}return[3,4];case 1:return window.location.href=e.url,[3,4];case 2:return[4,p(e)];case 3:return t.sent(),[3,4];case 4:return[2]}}))}))})),m.label=1;case 1:return m.trys.push([1,3,,4]),[4,h()];case 2:return m.sent().forEach((function(e){var t=o(o({},e),{type:c.VIDEO});n.addItemToList(t)})),n.show(),[3,4];case 3:return a=m.sent(),console.error("An error occurred",a),[3,4];case 4:return d=function(){var e,t,o=r(window.location.href);if(""!==o){var n=null===(t=null===(e=null===ytplayer||void 0===ytplayer?void 0:ytplayer.config)||void 0===e?void 0:e.args)||void 0===t?void 0:t.video_id;return n&&n===o?ytplayer.config.args.raw_player_response.captions.playerCaptionsTracklistRenderer.captionTracks.map((function(e){return{title:e.name.simpleText,subtitle:"Subtitle "+e.languageCode,url:"",extras:{baseUrl:e.baseUrl}}})):[]}return[]}(),d.forEach((function(e){var t=o(o({},e),{type:c.SUBTITLE});n.addItemToList(t)})),n.show(),[2]}}))}))}!function(e){e.VIDEO="element_type_video",e.SUBTITLE="element_type_subtitle"}(c||(c={}));export{m as default};
//# sourceMappingURL=youtube-f9ad9f02.js.map
