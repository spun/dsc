{"version":3,"file":"main-bundle.js","sources":["../../node_modules/tslib/tslib.es6.js","../../src-bookmarklet/youtube/formats.ts","../../src-bookmarklet/youtube/utils/subtitleTimeUtils.ts","../../src-bookmarklet/youtube/youtube.ts","../../node_modules/style-inject/dist/style-inject.es.js","../../src-bookmarklet/popup/popup.ts","../../src-bookmarklet/twitch/utils/accessUtils.ts","../../src-bookmarklet/twitch/twitch.ts","../../src-bookmarklet/mixer/mixer.ts","../../src-bookmarklet/main-bundle.ts"],"sourcesContent":["/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.unshift(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.unshift(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n\r\nexport function __addDisposableResource(env, value, async) {\r\n    if (value !== null && value !== void 0) {\r\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\r\n        var dispose;\r\n        if (async) {\r\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\r\n            dispose = value[Symbol.asyncDispose];\r\n        }\r\n        if (dispose === void 0) {\r\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\r\n            dispose = value[Symbol.dispose];\r\n        }\r\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\r\n        env.stack.push({ value: value, dispose: dispose, async: async });\r\n    }\r\n    else if (async) {\r\n        env.stack.push({ async: true });\r\n    }\r\n    return value;\r\n}\r\n\r\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\r\n\r\nexport function __disposeResources(env) {\r\n    function fail(e) {\r\n        env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\r\n        env.hasError = true;\r\n    }\r\n    function next() {\r\n        while (env.stack.length) {\r\n            var rec = env.stack.pop();\r\n            try {\r\n                var result = rec.dispose && rec.dispose.call(rec.value);\r\n                if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\r\n            }\r\n            catch (e) {\r\n                fail(e);\r\n            }\r\n        }\r\n        if (env.hasError) throw env.error;\r\n    }\r\n    return next();\r\n}\r\n\r\nexport default {\r\n    __extends: __extends,\r\n    __assign: __assign,\r\n    __rest: __rest,\r\n    __decorate: __decorate,\r\n    __param: __param,\r\n    __metadata: __metadata,\r\n    __awaiter: __awaiter,\r\n    __generator: __generator,\r\n    __createBinding: __createBinding,\r\n    __exportStar: __exportStar,\r\n    __values: __values,\r\n    __read: __read,\r\n    __spread: __spread,\r\n    __spreadArrays: __spreadArrays,\r\n    __spreadArray: __spreadArray,\r\n    __await: __await,\r\n    __asyncGenerator: __asyncGenerator,\r\n    __asyncDelegator: __asyncDelegator,\r\n    __asyncValues: __asyncValues,\r\n    __makeTemplateObject: __makeTemplateObject,\r\n    __importStar: __importStar,\r\n    __importDefault: __importDefault,\r\n    __classPrivateFieldGet: __classPrivateFieldGet,\r\n    __classPrivateFieldSet: __classPrivateFieldSet,\r\n    __classPrivateFieldIn: __classPrivateFieldIn,\r\n    __addDisposableResource: __addDisposableResource,\r\n    __disposeResources: __disposeResources,\r\n};\r\n","interface YtDlFormat {\n  ext?: string;\n  width?: number;\n  height?: number;\n  abr?: number;\n  acodec?: string;\n  vcodec?: string;\n  format_note?: string;\n  preference?: number;\n  container?: string;\n  fps?: number;\n}\n\ninterface YtItagInfo {\n  text: string;\n  subtext: string;\n}\n\nconst formats: Record<number, YtDlFormat> = {\n  5: {\n    ext: 'flv', width: 400, height: 240, acodec: 'mp3', abr: 64, vcodec: 'h263',\n  },\n  6: {\n    ext: 'flv', width: 450, height: 270, acodec: 'mp3', abr: 64, vcodec: 'h263',\n  },\n  13: {\n    ext: '3gp', acodec: 'aac', vcodec: 'mp4v',\n  },\n  17: {\n    ext: '3gp', width: 176, height: 144, acodec: 'aac', abr: 24, vcodec: 'mp4v',\n  },\n  18: {\n    ext: 'mp4', width: 640, height: 360, acodec: 'aac', abr: 96, vcodec: 'h264',\n  },\n  22: {\n    ext: 'mp4', width: 1280, height: 720, acodec: 'aac', abr: 192, vcodec: 'h264',\n  },\n  34: {\n    ext: 'flv', width: 640, height: 360, acodec: 'aac', abr: 128, vcodec: 'h264',\n  },\n  35: {\n    ext: 'flv', width: 854, height: 480, acodec: 'aac', abr: 128, vcodec: 'h264',\n  },\n  36: {\n    ext: '3gp', width: 320, acodec: 'aac', vcodec: 'mp4v',\n  },\n  37: {\n    ext: 'mp4', width: 1920, height: 1080, acodec: 'aac', abr: 192, vcodec: 'h264',\n  },\n  38: {\n    ext: 'mp4', width: 4096, height: 3072, acodec: 'aac', abr: 192, vcodec: 'h264',\n  },\n  43: {\n    ext: 'webm', width: 640, height: 360, acodec: 'vorbis', abr: 128, vcodec: 'vp8',\n  },\n  44: {\n    ext: 'webm', width: 854, height: 480, acodec: 'vorbis', abr: 128, vcodec: 'vp8',\n  },\n  45: {\n    ext: 'webm', width: 1280, height: 720, acodec: 'vorbis', abr: 192, vcodec: 'vp8',\n  },\n  46: {\n    ext: 'webm', width: 1920, height: 1080, acodec: 'vorbis', abr: 192, vcodec: 'vp8',\n  },\n  59: {\n    ext: 'mp4', width: 854, height: 480, acodec: 'aac', abr: 128, vcodec: 'h264',\n  },\n  78: {\n    ext: 'mp4', width: 854, height: 480, acodec: 'aac', abr: 128, vcodec: 'h264',\n  },\n  82: {\n    ext: 'mp4', height: 360, format_note: '3D', acodec: 'aac', abr: 128, vcodec: 'h264', preference: -20,\n  },\n  83: {\n    ext: 'mp4', height: 480, format_note: '3D', acodec: 'aac', abr: 128, vcodec: 'h264', preference: -20,\n  },\n  84: {\n    ext: 'mp4', height: 720, format_note: '3D', acodec: 'aac', abr: 192, vcodec: 'h264', preference: -20,\n  },\n  85: {\n    ext: 'mp4', height: 1080, format_note: '3D', acodec: 'aac', abr: 192, vcodec: 'h264', preference: -20,\n  },\n  100: {\n    ext: 'webm', height: 360, format_note: '3D', acodec: 'vorbis', abr: 128, vcodec: 'vp8', preference: -20,\n  },\n  101: {\n    ext: 'webm', height: 480, format_note: '3D', acodec: 'vorbis', abr: 192, vcodec: 'vp8', preference: -20,\n  },\n  102: {\n    ext: 'webm', height: 720, format_note: '3D', acodec: 'vorbis', abr: 192, vcodec: 'vp8', preference: -20,\n  },\n  91: {\n    ext: 'mp4', height: 144, format_note: 'HLS', acodec: 'aac', abr: 48, vcodec: 'h264', preference: -10,\n  },\n  92: {\n    ext: 'mp4', height: 240, format_note: 'HLS', acodec: 'aac', abr: 48, vcodec: 'h264', preference: -10,\n  },\n  93: {\n    ext: 'mp4', height: 360, format_note: 'HLS', acodec: 'aac', abr: 128, vcodec: 'h264', preference: -10,\n  },\n  94: {\n    ext: 'mp4', height: 480, format_note: 'HLS', acodec: 'aac', abr: 128, vcodec: 'h264', preference: -10,\n  },\n  95: {\n    ext: 'mp4', height: 720, format_note: 'HLS', acodec: 'aac', abr: 256, vcodec: 'h264', preference: -10,\n  },\n  96: {\n    ext: 'mp4', height: 1080, format_note: 'HLS', acodec: 'aac', abr: 256, vcodec: 'h264', preference: -10,\n  },\n  132: {\n    ext: 'mp4', height: 240, format_note: 'HLS', acodec: 'aac', abr: 48, vcodec: 'h264', preference: -10,\n  },\n  151: {\n    ext: 'mp4', height: 72, format_note: 'HLS', acodec: 'aac', abr: 24, vcodec: 'h264', preference: -10,\n  },\n  133: {\n    ext: 'mp4', height: 240, format_note: 'DASH video', vcodec: 'h264',\n  },\n  134: {\n    ext: 'mp4', height: 360, format_note: 'DASH video', vcodec: 'h264',\n  },\n  135: {\n    ext: 'mp4', height: 480, format_note: 'DASH video', vcodec: 'h264',\n  },\n  136: {\n    ext: 'mp4', height: 720, format_note: 'DASH video', vcodec: 'h264',\n  },\n  137: {\n    ext: 'mp4', height: 1080, format_note: 'DASH video', vcodec: 'h264',\n  },\n  138: {\n    ext: 'mp4', format_note: 'DASH video', vcodec: 'h264',\n  },\n  160: {\n    ext: 'mp4', height: 144, format_note: 'DASH video', vcodec: 'h264',\n  },\n  212: {\n    ext: 'mp4', height: 480, format_note: 'DASH video', vcodec: 'h264',\n  },\n  264: {\n    ext: 'mp4', height: 1440, format_note: 'DASH video', vcodec: 'h264',\n  },\n  298: {\n    ext: 'mp4', height: 720, format_note: 'DASH video', vcodec: 'h264', fps: 60,\n  },\n  299: {\n    ext: 'mp4', height: 1080, format_note: 'DASH video', vcodec: 'h264', fps: 60,\n  },\n  266: {\n    ext: 'mp4', height: 2160, format_note: 'DASH video', vcodec: 'h264',\n  },\n  139: {\n    ext: 'm4a', format_note: 'DASH audio', acodec: 'aac', abr: 48, container: 'm4a_dash',\n  },\n  140: {\n    ext: 'm4a', format_note: 'DASH audio', acodec: 'aac', abr: 128, container: 'm4a_dash',\n  },\n  141: {\n    ext: 'm4a', format_note: 'DASH audio', acodec: 'aac', abr: 256, container: 'm4a_dash',\n  },\n  256: {\n    ext: 'm4a', format_note: 'DASH audio', acodec: 'aac', container: 'm4a_dash',\n  },\n  258: {\n    ext: 'm4a', format_note: 'DASH audio', acodec: 'aac', container: 'm4a_dash',\n  },\n  325: {\n    ext: 'm4a', format_note: 'DASH audio', acodec: 'dtse', container: 'm4a_dash',\n  },\n  328: {\n    ext: 'm4a', format_note: 'DASH audio', acodec: 'ec-3', container: 'm4a_dash',\n  },\n  167: {\n    ext: 'webm', height: 360, width: 640, format_note: 'DASH video', container: 'webm', vcodec: 'vp8',\n  },\n  168: {\n    ext: 'webm', height: 480, width: 854, format_note: 'DASH video', container: 'webm', vcodec: 'vp8',\n  },\n  169: {\n    ext: 'webm', height: 720, width: 1280, format_note: 'DASH video', container: 'webm', vcodec: 'vp8',\n  },\n  170: {\n    ext: 'webm', height: 1080, width: 1920, format_note: 'DASH video', container: 'webm', vcodec: 'vp8',\n  },\n  218: {\n    ext: 'webm', height: 480, width: 854, format_note: 'DASH video', container: 'webm', vcodec: 'vp8',\n  },\n  219: {\n    ext: 'webm', height: 480, width: 854, format_note: 'DASH video', container: 'webm', vcodec: 'vp8',\n  },\n  278: {\n    ext: 'webm', height: 144, format_note: 'DASH video', container: 'webm', vcodec: 'vp9',\n  },\n  242: {\n    ext: 'webm', height: 240, format_note: 'DASH video', vcodec: 'vp9',\n  },\n  243: {\n    ext: 'webm', height: 360, format_note: 'DASH video', vcodec: 'vp9',\n  },\n  244: {\n    ext: 'webm', height: 480, format_note: 'DASH video', vcodec: 'vp9',\n  },\n  245: {\n    ext: 'webm', height: 480, format_note: 'DASH video', vcodec: 'vp9',\n  },\n  246: {\n    ext: 'webm', height: 480, format_note: 'DASH video', vcodec: 'vp9',\n  },\n  247: {\n    ext: 'webm', height: 720, format_note: 'DASH video', vcodec: 'vp9',\n  },\n  248: {\n    ext: 'webm', height: 1080, format_note: 'DASH video', vcodec: 'vp9',\n  },\n  271: {\n    ext: 'webm', height: 1440, format_note: 'DASH video', vcodec: 'vp9',\n  },\n  272: {\n    ext: 'webm', height: 2160, format_note: 'DASH video', vcodec: 'vp9',\n  },\n  302: {\n    ext: 'webm', height: 720, format_note: 'DASH video', vcodec: 'vp9', fps: 60,\n  },\n  303: {\n    ext: 'webm', height: 1080, format_note: 'DASH video', vcodec: 'vp9', fps: 60,\n  },\n  308: {\n    ext: 'webm', height: 1440, format_note: 'DASH video', vcodec: 'vp9', fps: 60,\n  },\n  313: {\n    ext: 'webm', height: 2160, format_note: 'DASH video', vcodec: 'vp9',\n  },\n  315: {\n    ext: 'webm', height: 2160, format_note: 'DASH video', vcodec: 'vp9', fps: 60,\n  },\n  171: {\n    ext: 'webm', acodec: 'vorbis', format_note: 'DASH audio', abr: 128,\n  },\n  172: {\n    ext: 'webm', acodec: 'vorbis', format_note: 'DASH audio', abr: 256,\n  },\n  249: {\n    ext: 'webm', format_note: 'DASH audio', acodec: 'opus', abr: 50,\n  },\n  250: {\n    ext: 'webm', format_note: 'DASH audio', acodec: 'opus', abr: 70,\n  },\n  251: {\n    ext: 'webm', format_note: 'DASH audio', acodec: 'opus', abr: 160,\n  },\n  394: { acodec: 'none', vcodec: 'av01.0.05M.08' },\n  395: { acodec: 'none', vcodec: 'av01.0.05M.08' },\n  396: { acodec: 'none', vcodec: 'av01.0.05M.08' },\n  397: { acodec: 'none', vcodec: 'av01.0.05M.08' },\n};\n\nfunction printResolution(format: YtDlFormat): string {\n  if (format.width && format.height) {\n    return `${format.width} x ${format.height}`;\n  }\n  if (format.width || format.height) {\n    return `${format.width || format.height}`;\n  }\n  return '';\n}\n\n/**\n * Get the format description from an itag\n */\nfunction getYtItagInfo(itag: number): YtItagInfo {\n  let text = 'Unknown';\n  let subtext = '';\n\n  const format = formats[itag];\n  if (format) {\n    // Text\n    text = `${printResolution(format)} (${format.ext})`;\n    if (format.format_note) { text += ` - ${format.format_note}`; }\n    // Subtext\n    const subtextElements = [];\n    if (format.vcodec) { subtextElements.push(`video: ${format.vcodec}`); }\n    if (format.acodec) { subtextElements.push(`audio: ${format.acodec}`); }\n    if (subtextElements.length > 0) {\n      subtext = subtextElements.join(' + ');\n    } else {\n      subtext = `itag: ${itag}`;\n    }\n  }\n  return { text, subtext };\n}\n\nexport { formats, getYtItagInfo };\n","interface TimeStamp {\n  hours: number\n  minutes: number\n  seconds: number\n  milliseconds: number\n}\n\n/**\n * Converts a milisecconds time number value to a TimeStamp object\n */\nexport function millisecondsToTimeStamp(millisecondsInput: number): TimeStamp {\n  const ms = millisecondsInput % 1000;\n  const s = Math.floor(millisecondsInput / 1000) % 60;\n  const m = Math.floor(millisecondsInput / 60000) % 60;\n  const h = Math.floor(millisecondsInput / 3600000);\n  return {\n    hours: h,\n    minutes: m,\n    seconds: s,\n    milliseconds: ms,\n  };\n}\n\n/**\n * Converts a TimeStamp to a SRT file time format\n */\nexport function timeStampToSrtTime(timeStamp: TimeStamp): string {\n  const hours = timeStamp.hours.toString().padStart(2, '0');\n  const minutes = timeStamp.minutes.toString().padStart(2, '0');\n  const seconds = timeStamp.seconds.toString().padStart(2, '0');\n  const milliseconds = timeStamp.milliseconds.toString().padStart(3, '0');\n  return `${hours}:${minutes}:${seconds},${milliseconds}`;\n}\n\n/**\n * Converts a milisecconds time number to a SRT file time format\n */\nexport function millisecondsToSrtTime(milliseconds: number): string {\n  const msValue = (milliseconds >= 0) ? milliseconds : 0;\n  const timeStamp = millisecondsToTimeStamp(msValue);\n  return timeStampToSrtTime(timeStamp);\n}\n","// Video format dictionary\nimport { getYtItagInfo } from './formats';\n// Subtitle time formats util\nimport { millisecondsToSrtTime } from './utils/subtitleTimeUtils';\n// UI popup\nimport { Popup, PopupElementData } from '../popup/popup';\nimport { YtPlayer, RawPlayerResponse } from './model/YtPlayer';\nimport { YtCfg } from './model/YtCfg';\nimport TimedText from './model/TimedText';\n\ndeclare const ytplayer: YtPlayer;\ndeclare const ytcfg: YtCfg;\n\nenum ElementType {\n  VIDEO = 'element_type_video',\n  SUBTITLE = 'element_type_subtitle',\n}\n\ninterface YtPopupElementData extends PopupElementData {\n  type?: ElementType;\n  extras?: Record<string, unknown>;\n}\n\nfunction getVideoIdFromUrl(urlString: string) {\n  const regExp = /^.*(youtu\\.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|&v=)([^#&?]*).*/;\n  const match = urlString.match(regExp);\n  if (match) {\n    return match[2];\n  }\n  return '';\n}\n\n// Extract available formats from the player response\nfunction getFormatsUsingYtPlayerPlayerResponse(playerResponseJSON: RawPlayerResponse) {\n  const {\n    formats: baseFormats, // Base formats (Video + Audio)\n    adaptiveFormats, // Adaptative formats (separate video and audio)\n  } = playerResponseJSON.streamingData;\n  const allFormats = baseFormats.concat(adaptiveFormats).filter((item) => item);\n\n  // Title that we are going to append to the url to force the download\n  const videoTitle = escape(playerResponseJSON.videoDetails.title.replace(/\"/g, ''))\n    || 'download';\n\n  const result: YtPopupElementData[] = [];\n  allFormats.forEach((item) => {\n    const itagInfo = getYtItagInfo(item.itag);\n    // Add to results\n    result.push({\n      title: itagInfo.text,\n      subtitle: itagInfo.subtext || item.size || item.quality || '',\n      url: `${item.url}&title=${videoTitle}`,\n    });\n  });\n  return result;\n}\n\n// Method 2: Extract player_response using an api request\nasync function getPlayerResponseFromApi(videoId: string) {\n  // Extract api values from window\n  const {\n    INNERTUBE_API_KEY,\n    INNERTUBE_CONTEXT_CLIENT_VERSION,\n    INNERTUBE_CONTEXT_HL,\n    INNERTUBE_CONTEXT_CLIENT_NAME,\n  // eslint-disable-next-line no-underscore-dangle\n  } = ytcfg.data_;\n\n  // Create body for the api request\n  const data = {\n    context: {\n      client: {\n        hl: INNERTUBE_CONTEXT_HL,\n        clientName: INNERTUBE_CONTEXT_CLIENT_NAME,\n        clientVersion: INNERTUBE_CONTEXT_CLIENT_VERSION,\n        mainAppWebInfo: { graftUrl: `/watch?v=${videoId}` },\n      },\n    },\n    videoId,\n  };\n\n  // Api url\n  const url = `https://youtubei.googleapis.com/youtubei/v1/player?key=${INNERTUBE_API_KEY}`;\n\n  // Api post fetch request\n  const response = await fetch(url, {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify(data),\n  });\n  return response.json();\n}\n\n/**\n * We have more than one way to extract the available formats, but\n * not all methods are always available, so we check each one until\n * we are able to get the information. We use a Promise because some\n * of those methods may require a new request.\n */\nasync function getFormats() {\n  const locationUrl = window.location.href;\n  const urlVideoId = getVideoIdFromUrl(locationUrl);\n\n  // If we can't get the video id, we probably are in a page that doesn't contain any\n  // video. So we skip all the methods and fail the promise.\n  // TODO: Improve error messages\n  if (urlVideoId !== '') {\n    // While browsing the webpage as a SPA, the values from \"ytplayer\" get \"stuck\"\n    // with old values (from the first page visited) and only a page refresh can fix this\n    // situation. We don't know if there is a way to get the new \"ytplayer\" values\n    // from another property, but until then, we check \"ytplayer\" and make sure that\n    // it holds the values of the current webpage video. If the video ids are different\n    // we'll get all the data using the method 2 that makes a new request and doesn't\n    // depend on \"ytplayer\".\n    let isYtPlayerDataAvailable = false;\n    const jsVideoId = ytplayer?.config?.args?.video_id;\n    if (jsVideoId) {\n      if (urlVideoId === jsVideoId) {\n        isYtPlayerDataAvailable = true;\n      }\n    }\n\n    // Method 1: Using the property \"player_response\" from the \"ytplayer\"\n    // variable that we can use when we are in a video webpage.\n    if (isYtPlayerDataAvailable === true && ytplayer?.config?.args?.raw_player_response) {\n      console.info('Using method 1, \"getFormatsUsingYtPlayerPlayerResponse\"');\n      const playerResponse = ytplayer.config.args.raw_player_response;\n      return getFormatsUsingYtPlayerPlayerResponse(playerResponse);\n    }\n\n    // Method 2: If the player_response method was not available, we can make a new api request.\n    // This will get us the same information.\n    console.info('Using method 2, \"getPlayerResponseFromApi\"');\n    try {\n      const playerResponse : RawPlayerResponse = await getPlayerResponseFromApi(urlVideoId);\n      return getFormatsUsingYtPlayerPlayerResponse(playerResponse);\n    } catch (e) {\n      throw new Error(`getPlayerResponseFromApi failed: ${e}`);\n    }\n  }\n  throw new Error();\n}\n\n/**\n * Get a list of all available subtitles for the current video url\n */\nfunction getAvailableSubtitles(): YtPopupElementData[] {\n  // TODO: We also make this check for video formats. Extract so we can reuse it.\n  const locationUrl = window.location.href;\n  const urlVideoId = getVideoIdFromUrl(locationUrl);\n  // If we can't get the video id, we probably are in a page that doesn't contain any\n  // video. So we skip all the methods and fail the promise.\n  // TODO: Improve error messages\n  if (urlVideoId !== '') {\n    // While browsing the webpage as a SPA, the values from \"ytplayer\" get \"stuck\"\n    // with old values (from the first page visited) and only a page refresh can fix this\n    // situation. We don't know if there is a way to get the new \"ytplayer\" values\n    // from another property, but until then, we check \"ytplayer\" and make sure that\n    // it holds the values of the current webpage video.\n    const jsVideoId = ytplayer?.config?.args?.video_id;\n    if (!jsVideoId || jsVideoId !== urlVideoId) {\n      // We don't have an alternative solution to list available subtitles.\n      return [];\n    }\n\n    // Subtitle urls make use of a custom format. Beefore the download we need\n    // to transform it to a common subtitle format like srt. Because of that, url\n    // values are empty for subtitles and we need to set extra values required for\n    // the transformation and download triggered when the user selects a subtitle.\n    const captionsConfig = ytplayer.config.args.raw_player_response.captions;\n    const tracks = captionsConfig.playerCaptionsTracklistRenderer.captionTracks;\n    const result = tracks.map((track) => ({\n      title: track.name.simpleText,\n      subtitle: `Subtitle ${track.languageCode}`,\n      url: '',\n      extras: {\n        baseUrl: track.baseUrl,\n      },\n    }));\n    return result;\n  }\n  return [];\n}\n\n/**\n * Fetch the subtitle content, create the lines of a new srt file\n * with the expected format and trigger the download.\n */\nasync function downloadSubtitle(subtitleData: YtPopupElementData) {\n  // Fetch subtitle content\n  if (!subtitleData.extras) return;\n  const { baseUrl } = subtitleData.extras;\n  const response = await fetch(`${baseUrl}&fmt=json3`);\n  const json: TimedText = await response.json();\n\n  // Transform to srt format\n  let result = '';\n  let subtitleIndex = 1;\n  json.events.forEach((line) => {\n    if (line.tStartMs && line.dDurationMs && line.segs) {\n      result += (`${subtitleIndex}\\r\\n`);\n      result += `${millisecondsToSrtTime(line.tStartMs)} --> ${millisecondsToSrtTime(line.tStartMs + line.dDurationMs)}\\r\\n`;\n      line.segs.forEach((segment) => { result += (`${segment.utf8}\\r\\n`); });\n      result += ('\\r\\n');\n      subtitleIndex += 1;\n    }\n  });\n\n  // Trigger file download\n  const filename = 'subtitle.srt';\n  const blob = new Blob([result], { type: 'text/plain' });\n  const elem = window.document.createElement('a');\n  elem.href = window.URL.createObjectURL(blob);\n  elem.download = filename;\n  // Add to dom\n  document.body.appendChild(elem);\n  // trigger click event\n  elem.click();\n  // remove from dom\n  document.body.removeChild(elem);\n}\n\nasync function main(): Promise<void> {\n  // Popup\n  const popup = new Popup(async (receivedData) => {\n    const data = receivedData as YtPopupElementData;\n    // Check what type of available downloads was selected\n    switch (data.type) {\n      case ElementType.VIDEO:\n        // Navigate to download url\n        window.location.href = data.url;\n        break;\n      case ElementType.SUBTITLE:\n        // Create subtitle file and trigger download\n        await downloadSubtitle(data);\n        break;\n      default:\n      // default code block\n    }\n  });\n\n  // VIDEO FORMATS\n  try {\n    const formatResults = await getFormats();\n    formatResults.forEach((videoData) => {\n      const item: YtPopupElementData = { ...videoData, type: ElementType.VIDEO };\n      popup.addItemToList(item);\n    });\n    popup.show();\n  } catch (e) {\n    console.error('An error occurred', e);\n  }\n\n  // SUBTITLES\n  const availableSubtitles = getAvailableSubtitles();\n  // Add all available subtitle to the list\n  availableSubtitles.forEach((subtitleData) => {\n    const item: YtPopupElementData = { ...subtitleData, type: ElementType.SUBTITLE };\n    popup.addItemToList(item);\n  });\n\n  // Show popup\n  popup.show();\n}\n\nexport default main;\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import './popup.css';\n\ninterface PopupElementData {\n  title: string;\n  subtitle: string;\n  url: string;\n}\n\n// Main box\nfunction createPopupBox() {\n  // UI box\n  const popup = document.createElement('div');\n  popup.classList.add('card');\n  return popup;\n}\n\n// Box header\nfunction createPopupHeader(popup: Popup) {\n  // Header\n  const header = document.createElement('p');\n  header.classList.add('header');\n  // Header title\n  const headerTitle = document.createElement('span');\n  headerTitle.textContent = 'Available formats';\n  headerTitle.classList.add('title');\n  headerTitle.onclick = () => popup.restore();\n  header.appendChild(headerTitle);\n  // Minimize button\n  const headerMinimize = document.createElement('span');\n  headerMinimize.classList.add('minimize-popup-button');\n  headerMinimize.textContent = '_';\n  headerMinimize.onclick = () => popup.toggle();\n  header.appendChild(headerMinimize);\n  // Close button\n  const headerClose = document.createElement('span');\n  headerClose.classList.add('close-popup-button');\n  headerClose.textContent = 'X';\n  headerClose.onclick = () => popup.hide();\n  header.appendChild(headerClose);\n\n  return header;\n}\n\n// Box list\nfunction createPopupList() {\n  // Box list\n  const list = document.createElement('ul');\n  list.classList.add('list');\n  return list;\n}\n\n// Box list item\nfunction createPopupListItem(titleText: string, subtitleText: string, url: string) {\n  // Item\n  const listItem = document.createElement('li');\n  listItem.classList.add('list-item');\n  // Link wrapper\n  const link = document.createElement('a');\n  link.href = url;\n  listItem.appendChild(link);\n  // Item title\n  const title = document.createElement('p');\n  title.classList.add('title');\n  title.textContent = titleText;\n  link.appendChild(title);\n  // Item subtitle\n  const subTitle = document.createElement('p');\n  subTitle.classList.add('subtitle');\n  subTitle.textContent = subtitleText;\n  link.appendChild(subTitle);\n\n  return listItem;\n}\n\n// Popup class\nclass Popup {\n  boxId: string;\n\n  boxElement: HTMLDivElement;\n\n  headerElement: HTMLParagraphElement;\n\n  listElement: HTMLUListElement;\n\n  clickListener: (data: PopupElementData) => void;\n\n  constructor(clickListener: (data: PopupElementData) => void) {\n    this.boxId = 'dsc_popup';\n    // Create main box and attach to body\n    this.boxElement = createPopupBox();\n    this.boxElement.id = this.boxId;\n    // Create header and attach to box\n    this.headerElement = createPopupHeader(this);\n    this.boxElement.appendChild(this.headerElement);\n    // Create items list and attach to box\n    this.listElement = createPopupList();\n    this.boxElement.appendChild(this.listElement);\n    // Notify click events\n    this.clickListener = clickListener;\n  }\n\n  // Create and add a new list item to the box list\n  addItemToList(data: PopupElementData): void {\n    const li = createPopupListItem(data.title, data.subtitle, data.url);\n    li.onclick = () => {\n      this.clickListener(data);\n      // Prevent navigation. We do this instead of removing the link element\n      // in case the user wants to open the element url in a new tab.\n      return false;\n    };\n    this.listElement.appendChild(li);\n  }\n\n  // Add box to DOM\n  show(): void {\n    this.hide();\n    document.body.appendChild(this.boxElement);\n  }\n\n  // Remove box from DOM\n  hide(): void {\n    const popupElement = document.getElementById(this.boxId);\n    if (popupElement != null) {\n      const parent = popupElement.parentElement;\n      if (parent) {\n        parent.removeChild(popupElement);\n      }\n    }\n  }\n\n  // Add \"minimize\" class to show only the box header\n  minimize(): void {\n    this.boxElement.classList.add('minimize');\n  }\n\n  // Remove \"minimize\" class to show all the content of the box\n  restore(): void {\n    this.boxElement.classList.remove('minimize');\n  }\n\n  toggle(): void {\n    if (this.boxElement.classList.contains('minimize')) {\n      this.restore();\n    } else {\n      this.minimize();\n    }\n  }\n}\n\nexport { Popup, PopupElementData };\n","interface ApiResponse {\n  data: ApiResponseData\n}\n\ninterface ApiResponseData {\n  streamPlaybackAccessToken: ApiAccessToken,\n  videoPlaybackAccessToken: ApiAccessToken\n}\ninterface ApiAccessToken {\n  readonly signature: string;\n  readonly value: string;\n}\n\ninterface AccessToken {\n  readonly signature: string;\n  readonly token: string;\n}\n\n/**\n * Creates a request to get the access token using gql.\n * @param clientId The client id to use in the request.\n * @param isLive Defines if the petition is for a live channel (true) or for a VOD (false).\n * @param channelName If the petition is for a live channel, this has to be the channel name.\n * @param videoId If the petition is for a VOD, this has to be the id of the video.\n */\nasync function getAccessTokenResponse(clientId: string, isLive: boolean, channelName = '', videoId = '') : Promise<ApiResponse> {\n  const gqlTemplate = `\n    query PlaybackAccessToken_Template($login: String!, $isLive: Boolean!, $vodID: ID!, $isVod: Boolean!, $playerType: String!) {\n      streamPlaybackAccessToken(channelName: $login, params: {platform: \"web\", playerBackend: \"mediaplayer\", playerType: $playerType}) @include(if: $isLive) {\n        value\n        signature\n      }\n      videoPlaybackAccessToken(id: $vodID, params: {platform: \"web\", playerBackend: \"mediaplayer\", playerType: $playerType}) @include(if: $isVod) {\n        value\n        signature\n      }\n    }`;\n\n  // Form a gql petition\n  const gqlUrl = 'https://gql.twitch.tv/gql';\n  const requestQuery = {\n    operationName: 'PlaybackAccessToken_Template',\n    query: gqlTemplate,\n    variables: {\n      isLive,\n      login: channelName,\n      isVod: !isLive,\n      vodID: videoId,\n      playerType: 'site',\n    },\n  };\n\n  // Send request\n  const response = await fetch(gqlUrl, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'text/plain; charset=UTF-8',\n      'Client-ID': clientId,\n    },\n    body: JSON.stringify(requestQuery),\n  });\n\n  // Return data in JSON format\n  const dataJson = await response.json();\n  return dataJson;\n}\n\nexport async function getLiveAccessToken(\n  clientId: string,\n  channelName: string,\n) : Promise<AccessToken> {\n  const dataJson = await getAccessTokenResponse(clientId, true, channelName, undefined);\n  const { value: token, signature } = dataJson.data.streamPlaybackAccessToken;\n  return { token, signature };\n}\n\nexport async function getVideoAccessToken(\n  clientId: string,\n  videoId: string,\n) : Promise<AccessToken> {\n  const dataJson = await getAccessTokenResponse(clientId, false, undefined, videoId);\n  const { value: token, signature } = dataJson.data.videoPlaybackAccessToken;\n  return { token, signature };\n}\n","import { getLiveAccessToken, getVideoAccessToken } from './utils/accessUtils';\n\ninterface CommonOptions {\n  headers: Record<string, string>;\n}\ndeclare const commonOptions: CommonOptions;\n\n/**\n * Get assigned client id\n */\nfunction getClientId() {\n  return commonOptions.headers['Client-ID'];\n}\n\n/**\n * Check it the current url is from a main/live channel page and extracts the channel name\n */\nfunction isLiveChannelUrl() {\n  // A live channel only has the name of the channel in its pathname\n  const { pathname } = window.location;\n  const regExp = /^\\/(\\w+)\\/?$/;\n  const match = pathname.match(regExp);\n  if (match) {\n    return match[1];\n  }\n  return false;\n}\n\n/**\n * Get the manifest (m3u8 file) of a live channel\n */\nasync function getManifestLiveUrl(channelName: string, clientId: string) {\n  const accessToken = await getLiveAccessToken(clientId, channelName);\n  // Form url\n  const { signature } = accessToken;\n  const encodedToken = encodeURIComponent(accessToken.token);\n  return `https://usher.ttvnw.net/api/channel/hls/${channelName}.m3u8?sig=${signature}&token=${encodedToken}`;\n}\n\n/**\n * Check it the url is from a vod page with the type 1 format and extract the video id\n * Format: twitch.tv/videos/<videoId>\n */\nfunction getVodIdType1(url: string) {\n  const regExp = /^.*twitch\\.tv\\/videos\\/([0-9]+)*/;\n  const match = url.match(regExp);\n  if (match) {\n    return match[1];\n  }\n  return undefined;\n}\n\n/**\n * Check it the url is from a vod page with the type 2 format and extract the video id\n * Format: twitch.tv/<channelName>/video/<videoId>\n */\nfunction getVodIdType2(url: string) {\n  const regExp = /^.*twitch\\.tv\\/.*\\/video\\/([0-9]+)*/;\n  const match = url.match(regExp);\n  if (match) {\n    return match[1];\n  }\n  return undefined;\n}\n\n/**\n * Check it the current url is from a vod page and extracts the video id\n */\nfunction getVodId() {\n  const locationUrl = window.location.href;\n  return getVodIdType1(locationUrl) || getVodIdType2(locationUrl);\n}\n\n/**\n * Get the manifest (m3u8 file) of a live channel\n */\nasync function getManigestVideoUrl(videoId: string, clientId: string) {\n  const accessToken = await getVideoAccessToken(clientId, videoId);\n  // Form url\n  const { signature } = accessToken;\n  const encodedToken = encodeURIComponent(accessToken.token);\n  return `https://usher.ttvnw.net/vod/${videoId}.m3u8?sig=${signature}&token=${encodedToken}`;\n}\n\nasync function main(): Promise<void> {\n  // Check if the request is for a live channel\n  const channelName = isLiveChannelUrl();\n  if (channelName) {\n    const clientId = getClientId();\n    const liveManifestUrl = await getManifestLiveUrl(channelName, clientId);\n    window.location.href = liveManifestUrl;\n  } else {\n    // Check if the request was for a vod\n    const vodId = getVodId();\n    if (vodId) {\n      const clientId = getClientId();\n      const videoManifestUrl = await getManigestVideoUrl(vodId, clientId);\n      window.location.href = videoManifestUrl;\n    }\n  }\n}\n\nexport default main;\n","function getManifestUrl() {\n  const results = window.performance\n    .getEntriesByType('resource')\n    // .filter(resource => resource.initiatorType === 'xmlhttprequest') // changes between browsers\n    .filter((request) => request.name.includes('manifest.m3u8'));\n\n  return results[results.length - 1].name;\n}\n\n// Create and trigger file dowload (https://stackoverflow.com/a/33542499)\nfunction downloadAsFile(filename: string, text: string) {\n  const blob = new Blob([text], { type: 'text/plain' });\n  const elem = window.document.createElement('a');\n  elem.href = window.URL.createObjectURL(blob);\n  elem.download = filename;\n  // Add to dom\n  document.body.appendChild(elem);\n  // trigger click event\n  elem.click();\n  // remove from dom\n  document.body.removeChild(elem);\n}\n\nfunction getManifestText(manifestUrl: string) {\n  const baseUrl = manifestUrl.split('manifest.m3u8')[0];\n\n  fetch(manifestUrl)\n    .then((response) => response.text())\n    .then((text) => {\n      const result = text.replace(/^.*\\d+\\.ts$/gm, (value) => baseUrl + value);\n      downloadAsFile('result.m3u8', result);\n    })\n    .catch((e) => {\n      console.error(e);\n    });\n}\n\nexport default (): void => {\n  const manifestUrl = getManifestUrl();\n  getManifestText(manifestUrl);\n};\n","// src/main-bundle.ts\n// This file contains the same logic of \"main.js\" but without using\n// the dynamic import feature that can cause CORS problems.\nimport youtube from './youtube/youtube';\nimport twitch from './twitch/twitch';\nimport mixer from './mixer/mixer';\n\n(() => {\n  // Check current domain\n  switch (document.domain) {\n    case 'www.youtube.com':\n      youtube();\n      break;\n    case 'www.twitch.tv':\n    case 'twitch.tv':\n      twitch();\n      break;\n    case 'mixer.com':\n      mixer();\n      break;\n    default:\n      console.log(`Unknown domain: ${document.domain}`);\n      break;\n  }\n})();\n"],"names":["__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","SuppressedError","formats","ext","width","height","acodec","abr","vcodec","format_note","preference","fps","container","millisecondsToSrtTime","milliseconds","timeStamp","hours","toString","padStart","minutes","seconds","timeStampToSrtTime","millisecondsInput","ms","s","Math","floor","m","millisecondsToTimeStamp","ElementType","css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","Popup","constructor","clickListener","this","boxId","boxElement","popup","classList","add","createPopupBox","id","headerElement","header","headerTitle","textContent","onclick","restore","headerMinimize","toggle","headerClose","hide","createPopupHeader","listElement","list","createPopupList","addItemToList","data","li","titleText","subtitleText","url","listItem","link","href","title","subTitle","createPopupListItem","subtitle","show","body","popupElement","getElementById","parent","parentElement","removeChild","minimize","remove","contains","getVideoIdFromUrl","urlString","match","getFormatsUsingYtPlayerPlayerResponse","playerResponseJSON","baseFormats","adaptiveFormats","streamingData","allFormats","concat","filter","item","videoTitle","escape","videoDetails","replace","forEach","itagInfo","itag","text","subtext","format","printResolution","subtextElements","push","length","join","getYtItagInfo","size","quality","getFormats","urlVideoId","window","location","isYtPlayerDataAvailable","jsVideoId","_b","_a","ytplayer","config","args","video_id","_d","_c","raw_player_response","console","info","videoId","INNERTUBE_API_KEY","INNERTUBE_CONTEXT_CLIENT_VERSION","INNERTUBE_CONTEXT_HL","INNERTUBE_CONTEXT_CLIENT_NAME","ytcfg","data_","context","client","hl","clientName","clientVersion","mainAppWebInfo","graftUrl","fetch","method","headers","JSON","stringify","json","getPlayerResponseFromApi","Error","main","receivedData","VIDEO","SUBTITLE","subtitleData","extras","baseUrl","response","subtitleIndex","events","line","tStartMs","dDurationMs","segs","segment","utf8","blob","Blob","elem","URL","createObjectURL","download","click","downloadSubtitle","videoData","Object","assign","error","captions","playerCaptionsTracklistRenderer","captionTracks","map","track","name","simpleText","languageCode","getAvailableSubtitles","getAccessTokenResponse","clientId","isLive","channelName","requestQuery","operationName","query","variables","login","isVod","vodID","playerType","getClientId","commonOptions","getManifestLiveUrl","accessToken","dataJson","undefined","token","signature","streamPlaybackAccessToken","getLiveAccessToken","encodedToken","encodeURIComponent","getManigestVideoUrl","videoPlaybackAccessToken","getVideoAccessToken","pathname","isLiveChannelUrl","liveManifestUrl","vodId","locationUrl","getVodIdType1","getVodIdType2","getVodId","videoManifestUrl","getManifestText","manifestUrl","split","filename","downloadAsFile","catch","mixer","results","performance","getEntriesByType","request","includes","getManifestUrl","domain","youtube","twitch","log"],"mappings":"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","x_google_ignoreList":[0,4]}