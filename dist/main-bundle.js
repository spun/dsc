var e=function(){return e=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},e.apply(this,arguments)};function t(e,t,n,o){return new(n||(n=Promise))((function(a,c){function i(e){try{d(o.next(e))}catch(e){c(e)}}function r(e){try{d(o.throw(e))}catch(e){c(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,r)}d((o=o.apply(e,t||[])).next())}))}function n(e,t){var n,o,a,c,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return c={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function r(r){return function(d){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,r[0]&&(i=0)),i;)try{if(n=1,o&&(a=2&r[0]?o.return:r[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,o=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==r[0]&&2!==r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(e){r=[6,e],o=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,d])}}}var o={5:{ext:"flv",width:400,height:240,acodec:"mp3",abr:64,vcodec:"h263"},6:{ext:"flv",width:450,height:270,acodec:"mp3",abr:64,vcodec:"h263"},13:{ext:"3gp",acodec:"aac",vcodec:"mp4v"},17:{ext:"3gp",width:176,height:144,acodec:"aac",abr:24,vcodec:"mp4v"},18:{ext:"mp4",width:640,height:360,acodec:"aac",abr:96,vcodec:"h264"},22:{ext:"mp4",width:1280,height:720,acodec:"aac",abr:192,vcodec:"h264"},34:{ext:"flv",width:640,height:360,acodec:"aac",abr:128,vcodec:"h264"},35:{ext:"flv",width:854,height:480,acodec:"aac",abr:128,vcodec:"h264"},36:{ext:"3gp",width:320,acodec:"aac",vcodec:"mp4v"},37:{ext:"mp4",width:1920,height:1080,acodec:"aac",abr:192,vcodec:"h264"},38:{ext:"mp4",width:4096,height:3072,acodec:"aac",abr:192,vcodec:"h264"},43:{ext:"webm",width:640,height:360,acodec:"vorbis",abr:128,vcodec:"vp8"},44:{ext:"webm",width:854,height:480,acodec:"vorbis",abr:128,vcodec:"vp8"},45:{ext:"webm",width:1280,height:720,acodec:"vorbis",abr:192,vcodec:"vp8"},46:{ext:"webm",width:1920,height:1080,acodec:"vorbis",abr:192,vcodec:"vp8"},59:{ext:"mp4",width:854,height:480,acodec:"aac",abr:128,vcodec:"h264"},78:{ext:"mp4",width:854,height:480,acodec:"aac",abr:128,vcodec:"h264"},82:{ext:"mp4",height:360,format_note:"3D",acodec:"aac",abr:128,vcodec:"h264",preference:-20},83:{ext:"mp4",height:480,format_note:"3D",acodec:"aac",abr:128,vcodec:"h264",preference:-20},84:{ext:"mp4",height:720,format_note:"3D",acodec:"aac",abr:192,vcodec:"h264",preference:-20},85:{ext:"mp4",height:1080,format_note:"3D",acodec:"aac",abr:192,vcodec:"h264",preference:-20},100:{ext:"webm",height:360,format_note:"3D",acodec:"vorbis",abr:128,vcodec:"vp8",preference:-20},101:{ext:"webm",height:480,format_note:"3D",acodec:"vorbis",abr:192,vcodec:"vp8",preference:-20},102:{ext:"webm",height:720,format_note:"3D",acodec:"vorbis",abr:192,vcodec:"vp8",preference:-20},91:{ext:"mp4",height:144,format_note:"HLS",acodec:"aac",abr:48,vcodec:"h264",preference:-10},92:{ext:"mp4",height:240,format_note:"HLS",acodec:"aac",abr:48,vcodec:"h264",preference:-10},93:{ext:"mp4",height:360,format_note:"HLS",acodec:"aac",abr:128,vcodec:"h264",preference:-10},94:{ext:"mp4",height:480,format_note:"HLS",acodec:"aac",abr:128,vcodec:"h264",preference:-10},95:{ext:"mp4",height:720,format_note:"HLS",acodec:"aac",abr:256,vcodec:"h264",preference:-10},96:{ext:"mp4",height:1080,format_note:"HLS",acodec:"aac",abr:256,vcodec:"h264",preference:-10},132:{ext:"mp4",height:240,format_note:"HLS",acodec:"aac",abr:48,vcodec:"h264",preference:-10},151:{ext:"mp4",height:72,format_note:"HLS",acodec:"aac",abr:24,vcodec:"h264",preference:-10},133:{ext:"mp4",height:240,format_note:"DASH video",vcodec:"h264"},134:{ext:"mp4",height:360,format_note:"DASH video",vcodec:"h264"},135:{ext:"mp4",height:480,format_note:"DASH video",vcodec:"h264"},136:{ext:"mp4",height:720,format_note:"DASH video",vcodec:"h264"},137:{ext:"mp4",height:1080,format_note:"DASH video",vcodec:"h264"},138:{ext:"mp4",format_note:"DASH video",vcodec:"h264"},160:{ext:"mp4",height:144,format_note:"DASH video",vcodec:"h264"},212:{ext:"mp4",height:480,format_note:"DASH video",vcodec:"h264"},264:{ext:"mp4",height:1440,format_note:"DASH video",vcodec:"h264"},298:{ext:"mp4",height:720,format_note:"DASH video",vcodec:"h264",fps:60},299:{ext:"mp4",height:1080,format_note:"DASH video",vcodec:"h264",fps:60},266:{ext:"mp4",height:2160,format_note:"DASH video",vcodec:"h264"},139:{ext:"m4a",format_note:"DASH audio",acodec:"aac",abr:48,container:"m4a_dash"},140:{ext:"m4a",format_note:"DASH audio",acodec:"aac",abr:128,container:"m4a_dash"},141:{ext:"m4a",format_note:"DASH audio",acodec:"aac",abr:256,container:"m4a_dash"},256:{ext:"m4a",format_note:"DASH audio",acodec:"aac",container:"m4a_dash"},258:{ext:"m4a",format_note:"DASH audio",acodec:"aac",container:"m4a_dash"},325:{ext:"m4a",format_note:"DASH audio",acodec:"dtse",container:"m4a_dash"},328:{ext:"m4a",format_note:"DASH audio",acodec:"ec-3",container:"m4a_dash"},167:{ext:"webm",height:360,width:640,format_note:"DASH video",container:"webm",vcodec:"vp8"},168:{ext:"webm",height:480,width:854,format_note:"DASH video",container:"webm",vcodec:"vp8"},169:{ext:"webm",height:720,width:1280,format_note:"DASH video",container:"webm",vcodec:"vp8"},170:{ext:"webm",height:1080,width:1920,format_note:"DASH video",container:"webm",vcodec:"vp8"},218:{ext:"webm",height:480,width:854,format_note:"DASH video",container:"webm",vcodec:"vp8"},219:{ext:"webm",height:480,width:854,format_note:"DASH video",container:"webm",vcodec:"vp8"},278:{ext:"webm",height:144,format_note:"DASH video",container:"webm",vcodec:"vp9"},242:{ext:"webm",height:240,format_note:"DASH video",vcodec:"vp9"},243:{ext:"webm",height:360,format_note:"DASH video",vcodec:"vp9"},244:{ext:"webm",height:480,format_note:"DASH video",vcodec:"vp9"},245:{ext:"webm",height:480,format_note:"DASH video",vcodec:"vp9"},246:{ext:"webm",height:480,format_note:"DASH video",vcodec:"vp9"},247:{ext:"webm",height:720,format_note:"DASH video",vcodec:"vp9"},248:{ext:"webm",height:1080,format_note:"DASH video",vcodec:"vp9"},271:{ext:"webm",height:1440,format_note:"DASH video",vcodec:"vp9"},272:{ext:"webm",height:2160,format_note:"DASH video",vcodec:"vp9"},302:{ext:"webm",height:720,format_note:"DASH video",vcodec:"vp9",fps:60},303:{ext:"webm",height:1080,format_note:"DASH video",vcodec:"vp9",fps:60},308:{ext:"webm",height:1440,format_note:"DASH video",vcodec:"vp9",fps:60},313:{ext:"webm",height:2160,format_note:"DASH video",vcodec:"vp9"},315:{ext:"webm",height:2160,format_note:"DASH video",vcodec:"vp9",fps:60},171:{ext:"webm",acodec:"vorbis",format_note:"DASH audio",abr:128},172:{ext:"webm",acodec:"vorbis",format_note:"DASH audio",abr:256},249:{ext:"webm",format_note:"DASH audio",acodec:"opus",abr:50},250:{ext:"webm",format_note:"DASH audio",acodec:"opus",abr:70},251:{ext:"webm",format_note:"DASH audio",acodec:"opus",abr:160},394:{acodec:"none",vcodec:"av01.0.05M.08"},395:{acodec:"none",vcodec:"av01.0.05M.08"},396:{acodec:"none",vcodec:"av01.0.05M.08"},397:{acodec:"none",vcodec:"av01.0.05M.08"}};function a(e){var t,n,o,a;return function(e){var t=e.hours.toString().padStart(2,"0"),n=e.minutes.toString().padStart(2,"0"),o=e.seconds.toString().padStart(2,"0"),a=e.milliseconds.toString().padStart(3,"0");return"".concat(t,":").concat(n,":").concat(o,",").concat(a)}((n=(t=e>=0?e:0)%1e3,o=Math.floor(t/1e3)%60,a=Math.floor(t/6e4)%60,{hours:Math.floor(t/36e5),minutes:a,seconds:o,milliseconds:n}))}!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&o.firstChild?o.insertBefore(a,o.firstChild):o.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}("#dsc_popup.card {\n  font-family: sans-serif;\n  font-size: 12px;\n  position: fixed;\n  background: #fff;\n  width: 360px;\n  right: 16px;\n  bottom: 16px;\n  z-index: 1000;\n  border-radius: 2px;\n  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.19), 0 6px 6px rgba(0, 0, 0, 0.23);\n  animation: animateElement linear 0.3s;\n  transition: opacity 0.3s ease-out;\n}\n#dsc_popup.card * {\n  font-size: 100%;\n  margin: 0;\n  padding: 0;\n  line-height: 1;\n}\n\n#dsc_popup.card .header {\n  font-weight: bold;\n  position: relative;\n  background: #ff0000;\n  border-radius: 2px 2px 0 0;\n  box-shadow: 0 3px 6px -2px #808080;\n  overflow: hidden;\n  display: flex;\n}\n\n#dsc_popup.card .header .title {\n  color: #fff;\n  padding: 16px;\n  flex-grow: 1;\n}\n\n#dsc_popup.card .header .close-popup-button,\n#dsc_popup.card .header .minimize-popup-button {\n  padding: 16px;\n  color: #fff;\n  text-align: center;\n  cursor: pointer;\n}\n\n#dsc_popup.card .header .close-popup-button:hover,\n#dsc_popup.card .header .minimize-popup-button:hover {\n  background: #ca0000;\n}\n\n#dsc_popup.card .list {\n  list-style-type: none;\n  max-height: 240px;\n  overflow-y: scroll;\n  transition: max-height 0.3s ease-out;\n}\n\n#dsc_popup.card .list .list-item a {\n  padding: 16px;\n  text-decoration: none;\n  display: block;\n}\n\n#dsc_popup.card .list .list-item a .title {\n  color: #000;\n}\n\n#dsc_popup.card .list .list-item a .subtitle {\n  color: #0000008a;\n  margin-top: 4px;\n}\n\n#dsc_popup.card .list .list-item a {\n  text-decoration: none;\n  padding: 16px;\n  display: block;\n}\n\n#dsc_popup.card .list .list-item:hover {\n  background: rgb(245, 245, 245);\n}\n\n#dsc_popup.card .list .list-item:active {\n  background: #bebebe;\n}\n\n@keyframes animateElement {\n  0% {\n    opacity: 0;\n    transform: translate(0px, 10px);\n  }\n  100% {\n    opacity: 1;\n    transform: translate(0px, 0px);\n  }\n}\n\n/* Minimize */\n#dsc_popup.card.minimize .header .title {\n  cursor: pointer;\n}\n\n#dsc_popup.card.minimize .list {\n  max-height: 0;\n  transition: max-height 0.3s ease-out;\n}\n\n#dsc_popup.card.minimize {\n  opacity: 0.5;\n  transition: opacity 0.3s ease-out;\n}\n\n#dsc_popup.card.minimize:hover {\n  opacity: 1;\n}\n");var c,i=function(){function e(e){var t,n;this.boxId="dsc_popup",this.boxElement=((t=document.createElement("div")).classList.add("card"),t),this.boxElement.id=this.boxId,this.headerElement=function(e){var t=document.createElement("p");t.classList.add("header");var n=document.createElement("span");n.textContent="Available formats",n.classList.add("title"),n.onclick=function(){return e.restore()},t.appendChild(n);var o=document.createElement("span");o.classList.add("minimize-popup-button"),o.textContent="_",o.onclick=function(){return e.toggle()},t.appendChild(o);var a=document.createElement("span");return a.classList.add("close-popup-button"),a.textContent="X",a.onclick=function(){return e.hide()},t.appendChild(a),t}(this),this.boxElement.appendChild(this.headerElement),this.listElement=((n=document.createElement("ul")).classList.add("list"),n),this.boxElement.appendChild(this.listElement),this.clickListener=e}return e.prototype.addItemToList=function(e){var t=this,n=function(e,t,n){var o=document.createElement("li");o.classList.add("list-item");var a=document.createElement("a");a.href=n,o.appendChild(a);var c=document.createElement("p");c.classList.add("title"),c.textContent=e,a.appendChild(c);var i=document.createElement("p");return i.classList.add("subtitle"),i.textContent=t,a.appendChild(i),o}(e.title,e.subtitle,e.url);n.onclick=function(){return t.clickListener(e),!1},this.listElement.appendChild(n)},e.prototype.show=function(){this.hide(),document.body.appendChild(this.boxElement)},e.prototype.hide=function(){var e=document.getElementById(this.boxId);if(null!=e){var t=e.parentElement;t&&t.removeChild(e)}},e.prototype.minimize=function(){this.boxElement.classList.add("minimize")},e.prototype.restore=function(){this.boxElement.classList.remove("minimize")},e.prototype.toggle=function(){this.boxElement.classList.contains("minimize")?this.restore():this.minimize()},e}();function r(e){var t=e.match(/^.*(youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/);return t?t[2]:""}function d(e){var t=e.streamingData,n=t.formats,a=t.adaptiveFormats,c=n.concat(a).filter((function(e){return e})),i=escape(e.videoDetails.title.replace(/"/g,""))||"download",r=[];return c.forEach((function(e){var t=function(e){var t="Unknown",n="",a=o[e];if(a){t="".concat(function(e){return e.width&&e.height?"".concat(e.width," x ").concat(e.height):e.width||e.height?"".concat(e.width||e.height):""}(a)," (").concat(a.ext,")"),a.format_note&&(t+=" - ".concat(a.format_note));var c=[];a.vcodec&&c.push("video: ".concat(a.vcodec)),a.acodec&&c.push("audio: ".concat(a.acodec)),n=c.length>0?c.join(" + "):"itag: ".concat(e)}return{text:t,subtext:n}}(e.itag);r.push({title:t.text,subtitle:t.subtext||e.size||e.quality||"",url:"".concat(e.url,"&title=").concat(i)})})),r}function s(e){return t(this,void 0,void 0,(function(){var t,o,a,c,i,r,d;return n(this,(function(n){switch(n.label){case 0:return t=ytcfg.data_,o=t.INNERTUBE_API_KEY,a=t.INNERTUBE_CONTEXT_CLIENT_VERSION,c=t.INNERTUBE_CONTEXT_HL,i=t.INNERTUBE_CONTEXT_CLIENT_NAME,r={context:{client:{hl:c,clientName:i,clientVersion:a,mainAppWebInfo:{graftUrl:"/watch?v=".concat(e)}}},videoId:e},d="https://youtubei.googleapis.com/youtubei/v1/player?key=".concat(o),[4,fetch(d,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})];case 1:return[2,n.sent().json()]}}))}))}function h(){var e,o,a,c;return t(this,void 0,void 0,(function(){var t,i,h,p,l;return n(this,(function(n){switch(n.label){case 0:if(t=window.location.href,""===(i=r(t)))return[3,4];if(h=!1,(p=null===(o=null===(e=null===ytplayer||void 0===ytplayer?void 0:ytplayer.config)||void 0===e?void 0:e.args)||void 0===o?void 0:o.video_id)&&i===p&&(h=!0),!0===h&&(null===(c=null===(a=null===ytplayer||void 0===ytplayer?void 0:ytplayer.config)||void 0===a?void 0:a.args)||void 0===c?void 0:c.raw_player_response))return console.info('Using method 1, "getFormatsUsingYtPlayerPlayerResponse"'),[2,d(ytplayer.config.args.raw_player_response)];console.info('Using method 2, "getPlayerResponseFromApi"'),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,s(i)];case 2:return[2,d(n.sent())];case 3:throw l=n.sent(),new Error("getPlayerResponseFromApi failed: ".concat(l));case 4:throw new Error}}))}))}function p(e){return t(this,void 0,void 0,(function(){var t,o,c,i,r,d;return n(this,(function(n){switch(n.label){case 0:return e.extras?(t=e.extras.baseUrl,[4,fetch("".concat(t,"&fmt=json3"))]):[2];case 1:return[4,n.sent().json()];case 2:return o=n.sent(),c="",i=1,o.events.forEach((function(e){e.tStartMs&&e.dDurationMs&&e.segs&&(c+="".concat(i,"\r\n"),c+="".concat(a(e.tStartMs)," --\x3e ").concat(a(e.tStartMs+e.dDurationMs),"\r\n"),e.segs.forEach((function(e){c+="".concat(e.utf8,"\r\n")})),c+="\r\n",i+=1)})),"subtitle.srt",r=new Blob([c],{type:"text/plain"}),(d=window.document.createElement("a")).href=window.URL.createObjectURL(r),d.download="subtitle.srt",document.body.appendChild(d),d.click(),document.body.removeChild(d),[2]}}))}))}function l(){return t(this,void 0,void 0,(function(){var o,a,d,s=this;return n(this,(function(l){switch(l.label){case 0:o=new i((function(e){return t(s,void 0,void 0,(function(){var t;return n(this,(function(n){switch(n.label){case 0:switch((t=e).type){case c.VIDEO:return[3,1];case c.SUBTITLE:return[3,2]}return[3,4];case 1:return window.location.href=t.url,[3,4];case 2:return[4,p(t)];case 3:return n.sent(),[3,4];case 4:return[2]}}))}))})),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,h()];case 2:return l.sent().forEach((function(t){var n=e(e({},t),{type:c.VIDEO});o.addItemToList(n)})),o.show(),[3,4];case 3:return a=l.sent(),console.error("An error occurred",a),[3,4];case 4:return d=function(){var e,t,n=r(window.location.href);if(""!==n){var o=null===(t=null===(e=null===ytplayer||void 0===ytplayer?void 0:ytplayer.config)||void 0===e?void 0:e.args)||void 0===t?void 0:t.video_id;return o&&o===n?ytplayer.config.args.raw_player_response.captions.playerCaptionsTracklistRenderer.captionTracks.map((function(e){return{title:e.name.simpleText,subtitle:"Subtitle ".concat(e.languageCode),url:"",extras:{baseUrl:e.baseUrl}}})):[]}return[]}(),d.forEach((function(t){var n=e(e({},t),{type:c.SUBTITLE});o.addItemToList(n)})),o.show(),[2]}}))}))}function u(e,o,a,c){return void 0===a&&(a=""),void 0===c&&(c=""),t(this,void 0,void 0,(function(){var t;return n(this,(function(n){switch(n.label){case 0:return'\n    query PlaybackAccessToken_Template($login: String!, $isLive: Boolean!, $vodID: ID!, $isVod: Boolean!, $playerType: String!) {\n      streamPlaybackAccessToken(channelName: $login, params: {platform: "web", playerBackend: "mediaplayer", playerType: $playerType}) @include(if: $isLive) {\n        value\n        signature\n      }\n      videoPlaybackAccessToken(id: $vodID, params: {platform: "web", playerBackend: "mediaplayer", playerType: $playerType}) @include(if: $isVod) {\n        value\n        signature\n      }\n    }',"https://gql.twitch.tv/gql",t={operationName:"PlaybackAccessToken_Template",query:'\n    query PlaybackAccessToken_Template($login: String!, $isLive: Boolean!, $vodID: ID!, $isVod: Boolean!, $playerType: String!) {\n      streamPlaybackAccessToken(channelName: $login, params: {platform: "web", playerBackend: "mediaplayer", playerType: $playerType}) @include(if: $isLive) {\n        value\n        signature\n      }\n      videoPlaybackAccessToken(id: $vodID, params: {platform: "web", playerBackend: "mediaplayer", playerType: $playerType}) @include(if: $isVod) {\n        value\n        signature\n      }\n    }',variables:{isLive:o,login:a,isVod:!o,vodID:c,playerType:"site"}},[4,fetch("https://gql.twitch.tv/gql",{method:"POST",headers:{"Content-Type":"text/plain; charset=UTF-8","Client-ID":e},body:JSON.stringify(t)})];case 1:return[4,n.sent().json()];case 2:return[2,n.sent()]}}))}))}function m(e,o){return t(this,void 0,void 0,(function(){var t,a,c,i;return n(this,(function(n){switch(n.label){case 0:return[4,u(e,!0,o,void 0)];case 1:return t=n.sent(),a=t.data.streamPlaybackAccessToken,c=a.value,i=a.signature,[2,{token:c,signature:i}]}}))}))}function v(e,o){return t(this,void 0,void 0,(function(){var t,a,c,i;return n(this,(function(n){switch(n.label){case 0:return[4,u(e,!1,void 0,o)];case 1:return t=n.sent(),a=t.data.videoPlaybackAccessToken,c=a.value,i=a.signature,[2,{token:c,signature:i}]}}))}))}function f(){return commonOptions.headers["Client-ID"]}function b(e,o){return t(this,void 0,void 0,(function(){var t,a,c;return n(this,(function(n){switch(n.label){case 0:return[4,m(o,e)];case 1:return t=n.sent(),a=t.signature,c=encodeURIComponent(t.token),[2,"https://usher.ttvnw.net/api/channel/hls/".concat(e,".m3u8?sig=").concat(a,"&token=").concat(c)]}}))}))}function g(e,o){return t(this,void 0,void 0,(function(){var t,a,c;return n(this,(function(n){switch(n.label){case 0:return[4,v(o,e)];case 1:return t=n.sent(),a=t.signature,c=encodeURIComponent(t.token),[2,"https://usher.ttvnw.net/vod/".concat(e,".m3u8?sig=").concat(a,"&token=").concat(c)]}}))}))}function w(){return t(this,void 0,void 0,(function(){var e,t,o,a,c;return n(this,(function(n){switch(n.label){case 0:return r=window.location.pathname.match(/^\/(\w+)$/),(e=!!r&&r[1])?(a=f(),[4,b(e,a)]):[3,2];case 1:return t=n.sent(),window.location.href=t,[3,4];case 2:return i=window.location.href,o=function(e){var t=e.match(/^.*twitch\.tv\/videos\/([0-9]+)*/);if(t)return t[1]}(i)||function(e){var t=e.match(/^.*twitch\.tv\/.*\/video\/([0-9]+)*/);if(t)return t[1]}(i),o?(a=f(),[4,g(o,a)]):[3,4];case 3:c=n.sent(),window.location.href=c,n.label=4;case 4:return[2]}var i,r}))}))}function x(e){var t=e.split("manifest.m3u8")[0];fetch(e).then((function(e){return e.text()})).then((function(e){!function(e,t){var n=new Blob([t],{type:"text/plain"}),o=window.document.createElement("a");o.href=window.URL.createObjectURL(n),o.download=e,document.body.appendChild(o),o.click(),document.body.removeChild(o)}("result.m3u8",e.replace(/^.*\d+\.ts$/gm,(function(e){return t+e})))})).catch((function(e){console.error(e)}))}!function(e){e.VIDEO="element_type_video",e.SUBTITLE="element_type_subtitle"}(c||(c={}));var y=function(){var e;x((e=window.performance.getEntriesByType("resource").filter((function(e){return e.name.includes("manifest.m3u8")})))[e.length-1].name)};!function(){switch(document.domain){case"www.youtube.com":l();break;case"www.twitch.tv":case"twitch.tv":w();break;case"mixer.com":y();break;default:console.log("Unknown domain: ".concat(document.domain))}}();
//# sourceMappingURL=main-bundle.js.map
