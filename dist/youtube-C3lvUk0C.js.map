{"version":3,"file":"youtube-C3lvUk0C.js","sources":["../../src-bookmarklet/youtube/formats.ts","../../src-bookmarklet/youtube/utils/subtitleTimeUtils.ts","../../src-bookmarklet/youtube/youtube.ts","../../node_modules/style-inject/dist/style-inject.es.js","../../src-bookmarklet/popup/popup.ts"],"sourcesContent":["interface YtDlFormat {\n  ext?: string;\n  width?: number;\n  height?: number;\n  abr?: number;\n  acodec?: string;\n  vcodec?: string;\n  format_note?: string;\n  preference?: number;\n  container?: string;\n  fps?: number;\n}\n\ninterface YtItagInfo {\n  text: string;\n  subtext: string;\n}\n\nconst formats: Record<number, YtDlFormat> = {\n  5: {\n    ext: 'flv', width: 400, height: 240, acodec: 'mp3', abr: 64, vcodec: 'h263',\n  },\n  6: {\n    ext: 'flv', width: 450, height: 270, acodec: 'mp3', abr: 64, vcodec: 'h263',\n  },\n  13: {\n    ext: '3gp', acodec: 'aac', vcodec: 'mp4v',\n  },\n  17: {\n    ext: '3gp', width: 176, height: 144, acodec: 'aac', abr: 24, vcodec: 'mp4v',\n  },\n  18: {\n    ext: 'mp4', width: 640, height: 360, acodec: 'aac', abr: 96, vcodec: 'h264',\n  },\n  22: {\n    ext: 'mp4', width: 1280, height: 720, acodec: 'aac', abr: 192, vcodec: 'h264',\n  },\n  34: {\n    ext: 'flv', width: 640, height: 360, acodec: 'aac', abr: 128, vcodec: 'h264',\n  },\n  35: {\n    ext: 'flv', width: 854, height: 480, acodec: 'aac', abr: 128, vcodec: 'h264',\n  },\n  36: {\n    ext: '3gp', width: 320, acodec: 'aac', vcodec: 'mp4v',\n  },\n  37: {\n    ext: 'mp4', width: 1920, height: 1080, acodec: 'aac', abr: 192, vcodec: 'h264',\n  },\n  38: {\n    ext: 'mp4', width: 4096, height: 3072, acodec: 'aac', abr: 192, vcodec: 'h264',\n  },\n  43: {\n    ext: 'webm', width: 640, height: 360, acodec: 'vorbis', abr: 128, vcodec: 'vp8',\n  },\n  44: {\n    ext: 'webm', width: 854, height: 480, acodec: 'vorbis', abr: 128, vcodec: 'vp8',\n  },\n  45: {\n    ext: 'webm', width: 1280, height: 720, acodec: 'vorbis', abr: 192, vcodec: 'vp8',\n  },\n  46: {\n    ext: 'webm', width: 1920, height: 1080, acodec: 'vorbis', abr: 192, vcodec: 'vp8',\n  },\n  59: {\n    ext: 'mp4', width: 854, height: 480, acodec: 'aac', abr: 128, vcodec: 'h264',\n  },\n  78: {\n    ext: 'mp4', width: 854, height: 480, acodec: 'aac', abr: 128, vcodec: 'h264',\n  },\n  82: {\n    ext: 'mp4', height: 360, format_note: '3D', acodec: 'aac', abr: 128, vcodec: 'h264', preference: -20,\n  },\n  83: {\n    ext: 'mp4', height: 480, format_note: '3D', acodec: 'aac', abr: 128, vcodec: 'h264', preference: -20,\n  },\n  84: {\n    ext: 'mp4', height: 720, format_note: '3D', acodec: 'aac', abr: 192, vcodec: 'h264', preference: -20,\n  },\n  85: {\n    ext: 'mp4', height: 1080, format_note: '3D', acodec: 'aac', abr: 192, vcodec: 'h264', preference: -20,\n  },\n  100: {\n    ext: 'webm', height: 360, format_note: '3D', acodec: 'vorbis', abr: 128, vcodec: 'vp8', preference: -20,\n  },\n  101: {\n    ext: 'webm', height: 480, format_note: '3D', acodec: 'vorbis', abr: 192, vcodec: 'vp8', preference: -20,\n  },\n  102: {\n    ext: 'webm', height: 720, format_note: '3D', acodec: 'vorbis', abr: 192, vcodec: 'vp8', preference: -20,\n  },\n  91: {\n    ext: 'mp4', height: 144, format_note: 'HLS', acodec: 'aac', abr: 48, vcodec: 'h264', preference: -10,\n  },\n  92: {\n    ext: 'mp4', height: 240, format_note: 'HLS', acodec: 'aac', abr: 48, vcodec: 'h264', preference: -10,\n  },\n  93: {\n    ext: 'mp4', height: 360, format_note: 'HLS', acodec: 'aac', abr: 128, vcodec: 'h264', preference: -10,\n  },\n  94: {\n    ext: 'mp4', height: 480, format_note: 'HLS', acodec: 'aac', abr: 128, vcodec: 'h264', preference: -10,\n  },\n  95: {\n    ext: 'mp4', height: 720, format_note: 'HLS', acodec: 'aac', abr: 256, vcodec: 'h264', preference: -10,\n  },\n  96: {\n    ext: 'mp4', height: 1080, format_note: 'HLS', acodec: 'aac', abr: 256, vcodec: 'h264', preference: -10,\n  },\n  132: {\n    ext: 'mp4', height: 240, format_note: 'HLS', acodec: 'aac', abr: 48, vcodec: 'h264', preference: -10,\n  },\n  151: {\n    ext: 'mp4', height: 72, format_note: 'HLS', acodec: 'aac', abr: 24, vcodec: 'h264', preference: -10,\n  },\n  133: {\n    ext: 'mp4', height: 240, format_note: 'DASH video', vcodec: 'h264',\n  },\n  134: {\n    ext: 'mp4', height: 360, format_note: 'DASH video', vcodec: 'h264',\n  },\n  135: {\n    ext: 'mp4', height: 480, format_note: 'DASH video', vcodec: 'h264',\n  },\n  136: {\n    ext: 'mp4', height: 720, format_note: 'DASH video', vcodec: 'h264',\n  },\n  137: {\n    ext: 'mp4', height: 1080, format_note: 'DASH video', vcodec: 'h264',\n  },\n  138: {\n    ext: 'mp4', format_note: 'DASH video', vcodec: 'h264',\n  },\n  160: {\n    ext: 'mp4', height: 144, format_note: 'DASH video', vcodec: 'h264',\n  },\n  212: {\n    ext: 'mp4', height: 480, format_note: 'DASH video', vcodec: 'h264',\n  },\n  264: {\n    ext: 'mp4', height: 1440, format_note: 'DASH video', vcodec: 'h264',\n  },\n  298: {\n    ext: 'mp4', height: 720, format_note: 'DASH video', vcodec: 'h264', fps: 60,\n  },\n  299: {\n    ext: 'mp4', height: 1080, format_note: 'DASH video', vcodec: 'h264', fps: 60,\n  },\n  266: {\n    ext: 'mp4', height: 2160, format_note: 'DASH video', vcodec: 'h264',\n  },\n  139: {\n    ext: 'm4a', format_note: 'DASH audio', acodec: 'aac', abr: 48, container: 'm4a_dash',\n  },\n  140: {\n    ext: 'm4a', format_note: 'DASH audio', acodec: 'aac', abr: 128, container: 'm4a_dash',\n  },\n  141: {\n    ext: 'm4a', format_note: 'DASH audio', acodec: 'aac', abr: 256, container: 'm4a_dash',\n  },\n  256: {\n    ext: 'm4a', format_note: 'DASH audio', acodec: 'aac', container: 'm4a_dash',\n  },\n  258: {\n    ext: 'm4a', format_note: 'DASH audio', acodec: 'aac', container: 'm4a_dash',\n  },\n  325: {\n    ext: 'm4a', format_note: 'DASH audio', acodec: 'dtse', container: 'm4a_dash',\n  },\n  328: {\n    ext: 'm4a', format_note: 'DASH audio', acodec: 'ec-3', container: 'm4a_dash',\n  },\n  167: {\n    ext: 'webm', height: 360, width: 640, format_note: 'DASH video', container: 'webm', vcodec: 'vp8',\n  },\n  168: {\n    ext: 'webm', height: 480, width: 854, format_note: 'DASH video', container: 'webm', vcodec: 'vp8',\n  },\n  169: {\n    ext: 'webm', height: 720, width: 1280, format_note: 'DASH video', container: 'webm', vcodec: 'vp8',\n  },\n  170: {\n    ext: 'webm', height: 1080, width: 1920, format_note: 'DASH video', container: 'webm', vcodec: 'vp8',\n  },\n  218: {\n    ext: 'webm', height: 480, width: 854, format_note: 'DASH video', container: 'webm', vcodec: 'vp8',\n  },\n  219: {\n    ext: 'webm', height: 480, width: 854, format_note: 'DASH video', container: 'webm', vcodec: 'vp8',\n  },\n  278: {\n    ext: 'webm', height: 144, format_note: 'DASH video', container: 'webm', vcodec: 'vp9',\n  },\n  242: {\n    ext: 'webm', height: 240, format_note: 'DASH video', vcodec: 'vp9',\n  },\n  243: {\n    ext: 'webm', height: 360, format_note: 'DASH video', vcodec: 'vp9',\n  },\n  244: {\n    ext: 'webm', height: 480, format_note: 'DASH video', vcodec: 'vp9',\n  },\n  245: {\n    ext: 'webm', height: 480, format_note: 'DASH video', vcodec: 'vp9',\n  },\n  246: {\n    ext: 'webm', height: 480, format_note: 'DASH video', vcodec: 'vp9',\n  },\n  247: {\n    ext: 'webm', height: 720, format_note: 'DASH video', vcodec: 'vp9',\n  },\n  248: {\n    ext: 'webm', height: 1080, format_note: 'DASH video', vcodec: 'vp9',\n  },\n  271: {\n    ext: 'webm', height: 1440, format_note: 'DASH video', vcodec: 'vp9',\n  },\n  272: {\n    ext: 'webm', height: 2160, format_note: 'DASH video', vcodec: 'vp9',\n  },\n  302: {\n    ext: 'webm', height: 720, format_note: 'DASH video', vcodec: 'vp9', fps: 60,\n  },\n  303: {\n    ext: 'webm', height: 1080, format_note: 'DASH video', vcodec: 'vp9', fps: 60,\n  },\n  308: {\n    ext: 'webm', height: 1440, format_note: 'DASH video', vcodec: 'vp9', fps: 60,\n  },\n  313: {\n    ext: 'webm', height: 2160, format_note: 'DASH video', vcodec: 'vp9',\n  },\n  315: {\n    ext: 'webm', height: 2160, format_note: 'DASH video', vcodec: 'vp9', fps: 60,\n  },\n  171: {\n    ext: 'webm', acodec: 'vorbis', format_note: 'DASH audio', abr: 128,\n  },\n  172: {\n    ext: 'webm', acodec: 'vorbis', format_note: 'DASH audio', abr: 256,\n  },\n  249: {\n    ext: 'webm', format_note: 'DASH audio', acodec: 'opus', abr: 50,\n  },\n  250: {\n    ext: 'webm', format_note: 'DASH audio', acodec: 'opus', abr: 70,\n  },\n  251: {\n    ext: 'webm', format_note: 'DASH audio', acodec: 'opus', abr: 160,\n  },\n  394: { acodec: 'none', vcodec: 'av01.0.05M.08' },\n  395: { acodec: 'none', vcodec: 'av01.0.05M.08' },\n  396: { acodec: 'none', vcodec: 'av01.0.05M.08' },\n  397: { acodec: 'none', vcodec: 'av01.0.05M.08' },\n};\n\nfunction printResolution(format: YtDlFormat): string {\n  if (format.width && format.height) {\n    return `${format.width} x ${format.height}`;\n  }\n  if (format.width || format.height) {\n    return `${format.width || format.height}`;\n  }\n  return '';\n}\n\n/**\n * Get the format description from an itag\n */\nfunction getYtItagInfo(itag: number): YtItagInfo {\n  let text = 'Unknown';\n  let subtext = '';\n\n  const format = formats[itag];\n  if (format) {\n    // Text\n    text = `${printResolution(format)} (${format.ext})`;\n    if (format.format_note) { text += ` - ${format.format_note}`; }\n    // Subtext\n    const subtextElements = [];\n    if (format.vcodec) { subtextElements.push(`video: ${format.vcodec}`); }\n    if (format.acodec) { subtextElements.push(`audio: ${format.acodec}`); }\n    if (subtextElements.length > 0) {\n      subtext = subtextElements.join(' + ');\n    } else {\n      subtext = `itag: ${itag}`;\n    }\n  }\n  return { text, subtext };\n}\n\nexport { formats, getYtItagInfo };\n","interface TimeStamp {\n  hours: number\n  minutes: number\n  seconds: number\n  milliseconds: number\n}\n\n/**\n * Converts a milisecconds time number value to a TimeStamp object\n */\nexport function millisecondsToTimeStamp(millisecondsInput: number): TimeStamp {\n  const ms = millisecondsInput % 1000;\n  const s = Math.floor(millisecondsInput / 1000) % 60;\n  const m = Math.floor(millisecondsInput / 60000) % 60;\n  const h = Math.floor(millisecondsInput / 3600000);\n  return {\n    hours: h,\n    minutes: m,\n    seconds: s,\n    milliseconds: ms,\n  };\n}\n\n/**\n * Converts a TimeStamp to a SRT file time format\n */\nexport function timeStampToSrtTime(timeStamp: TimeStamp): string {\n  const hours = timeStamp.hours.toString().padStart(2, '0');\n  const minutes = timeStamp.minutes.toString().padStart(2, '0');\n  const seconds = timeStamp.seconds.toString().padStart(2, '0');\n  const milliseconds = timeStamp.milliseconds.toString().padStart(3, '0');\n  return `${hours}:${minutes}:${seconds},${milliseconds}`;\n}\n\n/**\n * Converts a milisecconds time number to a SRT file time format\n */\nexport function millisecondsToSrtTime(milliseconds: number): string {\n  const msValue = (milliseconds >= 0) ? milliseconds : 0;\n  const timeStamp = millisecondsToTimeStamp(msValue);\n  return timeStampToSrtTime(timeStamp);\n}\n","// Video format dictionary\nimport { getYtItagInfo } from './formats';\n// Subtitle time formats util\nimport { millisecondsToSrtTime } from './utils/subtitleTimeUtils';\n// UI popup\nimport { Popup, PopupElementData } from '../popup/popup';\nimport { YtPlayer, RawPlayerResponse } from './model/YtPlayer';\nimport { YtCfg } from './model/YtCfg';\nimport TimedText from './model/TimedText';\n\ndeclare const ytplayer: YtPlayer;\ndeclare const ytcfg: YtCfg;\n\nenum ElementType {\n  VIDEO = 'element_type_video',\n  SUBTITLE = 'element_type_subtitle',\n}\n\ninterface YtPopupElementData extends PopupElementData {\n  type?: ElementType;\n  extras?: Record<string, unknown>;\n}\n\nfunction getVideoIdFromUrl(urlString: string) {\n  const regExp = /^.*(youtu\\.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|&v=)([^#&?]*).*/;\n  const match = urlString.match(regExp);\n  if (match) {\n    return match[2];\n  }\n  return '';\n}\n\n// Extract available formats from the player response\nfunction getFormatsUsingYtPlayerPlayerResponse(playerResponseJSON: RawPlayerResponse) {\n  const {\n    formats: baseFormats, // Base formats (Video + Audio)\n    adaptiveFormats, // Adaptative formats (separate video and audio)\n  } = playerResponseJSON.streamingData;\n  const allFormats = baseFormats.concat(adaptiveFormats).filter((item) => item);\n\n  // Title that we are going to append to the url to force the download\n  const videoTitle = escape(playerResponseJSON.videoDetails.title.replace(/\"/g, ''))\n    || 'download';\n\n  const result: YtPopupElementData[] = [];\n  allFormats.forEach((item) => {\n    const itagInfo = getYtItagInfo(item.itag);\n    // Add to results\n    result.push({\n      title: itagInfo.text,\n      subtitle: itagInfo.subtext || item.size || item.quality || '',\n      url: `${item.url}&title=${videoTitle}`,\n    });\n  });\n  return result;\n}\n\n// Method 2: Extract player_response using an api request\nasync function getPlayerResponseFromApi(videoId: string) {\n  // Extract api values from window\n  const {\n    INNERTUBE_API_KEY,\n    INNERTUBE_CONTEXT_CLIENT_VERSION,\n    INNERTUBE_CONTEXT_HL,\n    INNERTUBE_CONTEXT_CLIENT_NAME,\n  // eslint-disable-next-line no-underscore-dangle\n  } = ytcfg.data_;\n\n  // Create body for the api request\n  const data = {\n    context: {\n      client: {\n        hl: INNERTUBE_CONTEXT_HL,\n        clientName: INNERTUBE_CONTEXT_CLIENT_NAME,\n        clientVersion: INNERTUBE_CONTEXT_CLIENT_VERSION,\n        mainAppWebInfo: { graftUrl: `/watch?v=${videoId}` },\n      },\n    },\n    videoId,\n  };\n\n  // Api url\n  const url = `https://youtubei.googleapis.com/youtubei/v1/player?key=${INNERTUBE_API_KEY}`;\n\n  // Api post fetch request\n  const response = await fetch(url, {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify(data),\n  });\n  return response.json();\n}\n\n/**\n * We have more than one way to extract the available formats, but\n * not all methods are always available, so we check each one until\n * we are able to get the information. We use a Promise because some\n * of those methods may require a new request.\n */\nasync function getFormats() {\n  const locationUrl = window.location.href;\n  const urlVideoId = getVideoIdFromUrl(locationUrl);\n\n  // If we can't get the video id, we probably are in a page that doesn't contain any\n  // video. So we skip all the methods and fail the promise.\n  // TODO: Improve error messages\n  if (urlVideoId !== '') {\n    // While browsing the webpage as a SPA, the values from \"ytplayer\" get \"stuck\"\n    // with old values (from the first page visited) and only a page refresh can fix this\n    // situation. We don't know if there is a way to get the new \"ytplayer\" values\n    // from another property, but until then, we check \"ytplayer\" and make sure that\n    // it holds the values of the current webpage video. If the video ids are different\n    // we'll get all the data using the method 2 that makes a new request and doesn't\n    // depend on \"ytplayer\".\n    let isYtPlayerDataAvailable = false;\n    const jsVideoId = ytplayer?.config?.args?.video_id;\n    if (jsVideoId) {\n      if (urlVideoId === jsVideoId) {\n        isYtPlayerDataAvailable = true;\n      }\n    }\n\n    // Method 1: Using the property \"player_response\" from the \"ytplayer\"\n    // variable that we can use when we are in a video webpage.\n    if (isYtPlayerDataAvailable === true && ytplayer?.config?.args?.raw_player_response) {\n      console.info('Using method 1, \"getFormatsUsingYtPlayerPlayerResponse\"');\n      const playerResponse = ytplayer.config.args.raw_player_response;\n      return getFormatsUsingYtPlayerPlayerResponse(playerResponse);\n    }\n\n    // Method 2: If the player_response method was not available, we can make a new api request.\n    // This will get us the same information.\n    console.info('Using method 2, \"getPlayerResponseFromApi\"');\n    try {\n      const playerResponse : RawPlayerResponse = await getPlayerResponseFromApi(urlVideoId);\n      return getFormatsUsingYtPlayerPlayerResponse(playerResponse);\n    } catch (e) {\n      throw new Error(`getPlayerResponseFromApi failed: ${e}`);\n    }\n  }\n  throw new Error();\n}\n\n/**\n * Get a list of all available subtitles for the current video url\n */\nfunction getAvailableSubtitles(): YtPopupElementData[] {\n  // TODO: We also make this check for video formats. Extract so we can reuse it.\n  const locationUrl = window.location.href;\n  const urlVideoId = getVideoIdFromUrl(locationUrl);\n  // If we can't get the video id, we probably are in a page that doesn't contain any\n  // video. So we skip all the methods and fail the promise.\n  // TODO: Improve error messages\n  if (urlVideoId !== '') {\n    // While browsing the webpage as a SPA, the values from \"ytplayer\" get \"stuck\"\n    // with old values (from the first page visited) and only a page refresh can fix this\n    // situation. We don't know if there is a way to get the new \"ytplayer\" values\n    // from another property, but until then, we check \"ytplayer\" and make sure that\n    // it holds the values of the current webpage video.\n    const jsVideoId = ytplayer?.config?.args?.video_id;\n    if (!jsVideoId || jsVideoId !== urlVideoId) {\n      // We don't have an alternative solution to list available subtitles.\n      return [];\n    }\n\n    // Subtitle urls make use of a custom format. Beefore the download we need\n    // to transform it to a common subtitle format like srt. Because of that, url\n    // values are empty for subtitles and we need to set extra values required for\n    // the transformation and download triggered when the user selects a subtitle.\n    const captionsConfig = ytplayer.config.args.raw_player_response.captions;\n    const tracks = captionsConfig.playerCaptionsTracklistRenderer.captionTracks;\n    const result = tracks.map((track) => ({\n      title: track.name.simpleText,\n      subtitle: `Subtitle ${track.languageCode}`,\n      url: '',\n      extras: {\n        baseUrl: track.baseUrl,\n      },\n    }));\n    return result;\n  }\n  return [];\n}\n\n/**\n * Fetch the subtitle content, create the lines of a new srt file\n * with the expected format and trigger the download.\n */\nasync function downloadSubtitle(subtitleData: YtPopupElementData) {\n  // Fetch subtitle content\n  if (!subtitleData.extras) return;\n  const { baseUrl } = subtitleData.extras;\n  const response = await fetch(`${baseUrl}&fmt=json3`);\n  const json: TimedText = await response.json();\n\n  // Transform to srt format\n  let result = '';\n  let subtitleIndex = 1;\n  json.events.forEach((line) => {\n    if (line.tStartMs && line.dDurationMs && line.segs) {\n      result += (`${subtitleIndex}\\r\\n`);\n      result += `${millisecondsToSrtTime(line.tStartMs)} --> ${millisecondsToSrtTime(line.tStartMs + line.dDurationMs)}\\r\\n`;\n      line.segs.forEach((segment) => { result += (`${segment.utf8}\\r\\n`); });\n      result += ('\\r\\n');\n      subtitleIndex += 1;\n    }\n  });\n\n  // Trigger file download\n  const filename = 'subtitle.srt';\n  const blob = new Blob([result], { type: 'text/plain' });\n  const elem = window.document.createElement('a');\n  elem.href = window.URL.createObjectURL(blob);\n  elem.download = filename;\n  // Add to dom\n  document.body.appendChild(elem);\n  // trigger click event\n  elem.click();\n  // remove from dom\n  document.body.removeChild(elem);\n}\n\nasync function main(): Promise<void> {\n  // Popup\n  const popup = new Popup(async (receivedData) => {\n    const data = receivedData as YtPopupElementData;\n    // Check what type of available downloads was selected\n    switch (data.type) {\n      case ElementType.VIDEO:\n        // Navigate to download url\n        window.location.href = data.url;\n        break;\n      case ElementType.SUBTITLE:\n        // Create subtitle file and trigger download\n        await downloadSubtitle(data);\n        break;\n      default:\n      // default code block\n    }\n  });\n\n  // VIDEO FORMATS\n  try {\n    const formatResults = await getFormats();\n    formatResults.forEach((videoData) => {\n      const item: YtPopupElementData = { ...videoData, type: ElementType.VIDEO };\n      popup.addItemToList(item);\n    });\n    popup.show();\n  } catch (e) {\n    console.error('An error occurred', e);\n  }\n\n  // SUBTITLES\n  const availableSubtitles = getAvailableSubtitles();\n  // Add all available subtitle to the list\n  availableSubtitles.forEach((subtitleData) => {\n    const item: YtPopupElementData = { ...subtitleData, type: ElementType.SUBTITLE };\n    popup.addItemToList(item);\n  });\n\n  // Show popup\n  popup.show();\n}\n\nexport default main;\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import './popup.css';\n\ninterface PopupElementData {\n  title: string;\n  subtitle: string;\n  url: string;\n}\n\n// Main box\nfunction createPopupBox() {\n  // UI box\n  const popup = document.createElement('div');\n  popup.classList.add('card');\n  return popup;\n}\n\n// Box header\nfunction createPopupHeader(popup: Popup) {\n  // Header\n  const header = document.createElement('p');\n  header.classList.add('header');\n  // Header title\n  const headerTitle = document.createElement('span');\n  headerTitle.textContent = 'Available formats';\n  headerTitle.classList.add('title');\n  headerTitle.onclick = () => popup.restore();\n  header.appendChild(headerTitle);\n  // Minimize button\n  const headerMinimize = document.createElement('span');\n  headerMinimize.classList.add('minimize-popup-button');\n  headerMinimize.textContent = '_';\n  headerMinimize.onclick = () => popup.toggle();\n  header.appendChild(headerMinimize);\n  // Close button\n  const headerClose = document.createElement('span');\n  headerClose.classList.add('close-popup-button');\n  headerClose.textContent = 'X';\n  headerClose.onclick = () => popup.hide();\n  header.appendChild(headerClose);\n\n  return header;\n}\n\n// Box list\nfunction createPopupList() {\n  // Box list\n  const list = document.createElement('ul');\n  list.classList.add('list');\n  return list;\n}\n\n// Box list item\nfunction createPopupListItem(titleText: string, subtitleText: string, url: string) {\n  // Item\n  const listItem = document.createElement('li');\n  listItem.classList.add('list-item');\n  // Link wrapper\n  const link = document.createElement('a');\n  link.href = url;\n  listItem.appendChild(link);\n  // Item title\n  const title = document.createElement('p');\n  title.classList.add('title');\n  title.textContent = titleText;\n  link.appendChild(title);\n  // Item subtitle\n  const subTitle = document.createElement('p');\n  subTitle.classList.add('subtitle');\n  subTitle.textContent = subtitleText;\n  link.appendChild(subTitle);\n\n  return listItem;\n}\n\n// Popup class\nclass Popup {\n  boxId: string;\n\n  boxElement: HTMLDivElement;\n\n  headerElement: HTMLParagraphElement;\n\n  listElement: HTMLUListElement;\n\n  clickListener: (data: PopupElementData) => void;\n\n  constructor(clickListener: (data: PopupElementData) => void) {\n    this.boxId = 'dsc_popup';\n    // Create main box and attach to body\n    this.boxElement = createPopupBox();\n    this.boxElement.id = this.boxId;\n    // Create header and attach to box\n    this.headerElement = createPopupHeader(this);\n    this.boxElement.appendChild(this.headerElement);\n    // Create items list and attach to box\n    this.listElement = createPopupList();\n    this.boxElement.appendChild(this.listElement);\n    // Notify click events\n    this.clickListener = clickListener;\n  }\n\n  // Create and add a new list item to the box list\n  addItemToList(data: PopupElementData): void {\n    const li = createPopupListItem(data.title, data.subtitle, data.url);\n    li.onclick = () => {\n      this.clickListener(data);\n      // Prevent navigation. We do this instead of removing the link element\n      // in case the user wants to open the element url in a new tab.\n      return false;\n    };\n    this.listElement.appendChild(li);\n  }\n\n  // Add box to DOM\n  show(): void {\n    this.hide();\n    document.body.appendChild(this.boxElement);\n  }\n\n  // Remove box from DOM\n  hide(): void {\n    const popupElement = document.getElementById(this.boxId);\n    if (popupElement != null) {\n      const parent = popupElement.parentElement;\n      if (parent) {\n        parent.removeChild(popupElement);\n      }\n    }\n  }\n\n  // Add \"minimize\" class to show only the box header\n  minimize(): void {\n    this.boxElement.classList.add('minimize');\n  }\n\n  // Remove \"minimize\" class to show all the content of the box\n  restore(): void {\n    this.boxElement.classList.remove('minimize');\n  }\n\n  toggle(): void {\n    if (this.boxElement.classList.contains('minimize')) {\n      this.restore();\n    } else {\n      this.minimize();\n    }\n  }\n}\n\nexport { Popup, PopupElementData };\n"],"names":["formats","ext","width","height","acodec","abr","vcodec","format_note","preference","fps","container","millisecondsToSrtTime","milliseconds","timeStamp","hours","toString","padStart","minutes","seconds","timeStampToSrtTime","millisecondsInput","ms","s","Math","floor","m","millisecondsToTimeStamp","ElementType","css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","Popup","constructor","clickListener","this","boxId","boxElement","popup","classList","add","createPopupBox","id","headerElement","header","headerTitle","textContent","onclick","restore","headerMinimize","toggle","headerClose","hide","createPopupHeader","listElement","list","createPopupList","addItemToList","data","li","titleText","subtitleText","url","listItem","link","href","title","subTitle","createPopupListItem","subtitle","show","body","popupElement","getElementById","parent","parentElement","removeChild","minimize","remove","contains","getVideoIdFromUrl","urlString","match","getFormatsUsingYtPlayerPlayerResponse","playerResponseJSON","baseFormats","adaptiveFormats","streamingData","allFormats","concat","filter","item","videoTitle","escape","videoDetails","replace","result","forEach","itagInfo","itag","text","subtext","format","printResolution","subtextElements","push","length","join","getYtItagInfo","size","quality","getFormats","urlVideoId","window","location","isYtPlayerDataAvailable","jsVideoId","_b","_a","ytplayer","config","args","video_id","_d","_c","raw_player_response","console","info","videoId","INNERTUBE_API_KEY","INNERTUBE_CONTEXT_CLIENT_VERSION","INNERTUBE_CONTEXT_HL","INNERTUBE_CONTEXT_CLIENT_NAME","ytcfg","data_","context","client","hl","clientName","clientVersion","mainAppWebInfo","graftUrl","fetch","method","headers","JSON","stringify","json","getPlayerResponseFromApi","e","Error","main","receivedData","__awaiter","VIDEO","SUBTITLE","subtitleData","extras","baseUrl","response","subtitleIndex","events","line","tStartMs","dDurationMs","segs","segment","utf8","blob","Blob","elem","URL","createObjectURL","download","click","downloadSubtitle","videoData","Object","assign","error","captions","playerCaptionsTracklistRenderer","captionTracks","map","track","name","simpleText","languageCode","getAvailableSubtitles"],"mappings":"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","x_google_ignoreList":[3]}