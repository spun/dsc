import{_ as t}from"./_tslib-6d5bfba3.js";function n(){return commonOptions.headers["Client-ID"]}function o(){return t(this,void 0,void 0,(function*(){const o=function(){const{pathname:t}=window.location,n=t.match(/^\/(\w+)$/);return!!n&&n[1]}();if(o){const i=n(),e=yield function(n,o){return t(this,void 0,void 0,(function*(){const t=`https://api.twitch.tv/api/channels/${n}/access_token?client_id=${o}&format=json`,i=yield fetch(t),e=yield i.json(),c=e.sig,s=encodeURIComponent(e.token);return`https://usher.ttvnw.net/api/channel/hls/${n}.m3u8?sig=${c}&token=${s}`}))}(o,i);window.location.href=e}else{const o=function(){const t=window.location.href.match(/^.*twitch\.tv\/videos\/([0-9]+)*/);return!!t&&t[1]}();if(o){const i=n(),e=yield function(n,o){return t(this,void 0,void 0,(function*(){const t=`https://api.twitch.tv/api/vods/${n}/access_token?client_id=${o}&format=json`,i=yield fetch(t),e=yield i.json(),c=e.sig,s=encodeURIComponent(e.token);return`https://usher.ttvnw.net/vod/${n}.m3u8?sig=${c}&token=${s}`}))}(o,i);window.location.href=e}}}))}export default o;
//# sourceMappingURL=twitch-b74317e6.js.map
